<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no"><title>SQL | Chfychin🥝</title><meta name="keywords" content="SQL"><meta name="author" content="chfychin🥝"><meta name="copyright" content="chfychin🥝"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#f7f9fe"><meta name="mobile-web-app-capable" content="yes"><meta name="apple-touch-fullscreen" content="yes"><meta name="apple-mobile-web-app-title" content="SQL"><meta name="application-name" content="SQL"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="#f7f9fe"><meta property="og:type" content="article"><meta property="og:title" content="SQL"><meta property="og:url" content="http://chfychin.cn/posts/4d712855.html"><meta property="og:site_name" content="Chfychin🥝"><meta property="og:description" content="SQL语句与基本语法"><meta property="og:locale" content="zh-CN"><meta property="og:image" content="https://pcgdemo.chfychin.cn/img/default_cover_60.webp"><meta property="article:author" content="chfychin🥝"><meta property="article:tag" content="Java,MySQL,算法,代码,博客,算法,数据结构,Butterfly,Hexo,chfychin🥝,chfychin"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://pcgdemo.chfychin.cn/img/default_cover_60.webp"><meta name="description" content="SQL语句与基本语法"><link rel="shortcut icon" href="/favicon.ico"><link rel="canonical" href="http://chfychin.cn/posts/4d712855"><link rel="preconnect" href="//cdn.cbd.int"/><link rel="preconnect" href="//hm.baidu.com"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><meta name="google-site-verification" content="xxx"/><meta name="baidu-site-verification" content="code-xxx"/><meta name="msvalidate.01" content="xxx"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.cbd.int/node-snackbar@0.1.16/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.cbd.int/@fancyapps/ui@5.0.28/dist/fancybox/fancybox.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.0/swiper/swiper.min.css" media="print" onload="this.media='all'"><script>var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?aa1f5dada486ec3117d676da0dc738e7";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script><script>const GLOBAL_CONFIG = {
  linkPageTop: {"enable":true,"title":"与数百名博主无限进步","addFriendPlaceholder":"昵称（请勿包含博客等字样）：\n网站地址（要求博客地址，请勿提交个人主页）：\n头像图片url（请提供尽可能清晰的图片，我会上传到我自己的图床）：\n描述：\n站点截图（可选）：\n"},
  peoplecanvas: undefined,
  postHeadAiDescription: {"enable":true,"gptName":"AnZhiYu","mode":"local","switchBtn":false,"btnLink":"https://afdian.net/item/886a79d4db6711eda42a52540025c377","randomNum":3,"basicWordCount":1500,"key":"JThDG9fC3qeV2Xd5Zh1N","Referer":"https://blog.chfychin.cn/"},
  diytitle: {"enable":true,"leaveTitle":"w(ﾟДﾟ)w 不要走！再看看嘛！","backTitle":"♪(^∇^*)欢迎肥来！"},
  LA51: undefined,
  greetingBox: undefined,
  twikooEnvId: 'https://twikoo.chfychin.cn/',
  commentBarrageConfig:undefined,
  root: '/',
  preloader: {"source":3},
  friends_vue_info: undefined,
  navMusic: true,
  mainTone: {"mode":"api","api":"https://img2color-go-three-blush.vercel.app/api?img=","cover_change":true},
  authorStatus: {"skills":["🤖️ 数码科技爱好者","🔍 分享与热心帮助","🏠 智能家居小能手","🔨 设计开发一条龙","🤝 专修交互与设计","🏃 脚踏实地行动派","🧱 团队小组发动机","💢 壮汉人狠话不多"]},
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":true,"languages":{"hits_empty":"找不到您查询的内容：${query}"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简","rightMenuMsgToTraditionalChinese":"转为繁体","rightMenuMsgToSimplifiedChinese":"转为简体"},
  noticeOutdate: {"limitDay":365,"position":"top","messagePrev":"It has been","messageNext":"days since the last update, the content of the article may be outdated."},
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":330},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    simplehomepage: true,
    post: false
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"copy":true,"copyrightEbable":false,"limitCount":50,"languages":{"author":"作者: chfychin🥝","link":"链接: ","source":"来源: Chfychin🥝","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。","copySuccess":"复制成功，复制和转载请标注本文地址"}},
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"你已切换为繁体","cht_to_chs":"你已切换为简体","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#425AEF","bgDark":"#1f1f1f","position":"bottom-left"},
  source: {
    justifiedGallery: {
      js: 'https://cdn.cbd.int/flickr-justified-gallery@2.1.2/dist/fjGallery.min.js',
      css: 'https://cdn.cbd.int/flickr-justified-gallery@2.1.2/dist/fjGallery.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isAnchor: false,
  shortcutKey: {"enable":true,"delay":100,"shiftDelay":200},
  autoDarkmode: true
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  configTitle: 'Chfychin🥝',
  title: 'SQL',
  postAI: '本教程介绍了如何在博客中安装基于Hexo主题的安知鱼主题，并提供了安装、应用主题、修改配置文件、本地启动等详细步骤及技术支持方式。教程的内容针对最新的主题版本进行更新，如果你是旧版本教程会有出入。,本文真不错',
  pageFillDescription: '创建数据表, 学生基本信息表student, 班级信息表class, 课程信息表course, 选修课程信息表sc, 教师信息表teacher, 教师任课情况表teaching, 插入数据, 表student, 表class, 表course, 表sc, 表teacher, 表teaching, 简单的数据操作, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 复杂数据查询 3问题, 1, 2, 3, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 数据操纵语言DML, 存储过程, 触发器 1/5有问题创建数据表学生基本信息表字段名字段类型约束条件字段含义说明学号姓名男或女性别出生日期班级号初值为已选修的总学分学号姓名男女性别出生日期班级号已选修的总学分班级信息表字段名字段类型约束条件字段含义说明班级号班级名称所属专业所属系别学生数班级号班级名称所属专业所属系别学生数课程信息表字段名字段类型约束条件字段含义说明课程号课程名称学分课程号课程名称学分选修课程信息表字段名字段类型约束条件字段含义说明学号课程号成绩学号课程号成绩教师信息表字段名字段类型约束条件字段含义说明教师号教师姓名男或女性别出生日期职称教师号教师姓名男女性别出生日期职称教师任课情况表字段名字段类型约束条件字段含义说明教师号课程号授课语言教师号课程号授课语言插入数据表李在男葛畅男刘晶女杨敏女胡贤斌男赵鸿泽男王威男赵玮女王娜娜女秦键男田邦仪女赵心砚男杨青女杨玲玲女李在男葛畅男刘晶女杨敏女胡贤斌男赵鸿泽男王威男赵玮女王娜娜女秦键男田邦仪女赵心砚男杨青女杨玲玲女表软件软件工程软件开发软件软件工程软件开发软件软件工程数字媒体软件软件工程软件开发软件软件工程数字媒体软件软件工程软件开发软件软件工程软件开发软件软件工程软件开发软件软件工程数字媒体软件软件工程软件开发软件软件工程数字媒体软件软件工程软件开发表计算机基础程序设计语言数据结构数据库系统计算机网络微机原理与应用计算机基础程序设计语言数据结构数据库系统计算机网络微机原理与应用表表李英女讲师王大山男副教授张朋男讲师陈为军男助教宋浩然男讲师许红霞女副教授徐永军男教授李桂菁女教授王一凡女讲师田峰男助教李英女讲师王大山男副教授张朋男讲师陈为军男助教宋浩然男讲师许红霞女副教授徐永军男教授李桂菁女教授王一凡女讲师田峰男助教表简单的数据操作查询所有同学的所有基本信息查询所有男同学的学号姓名出生日期男在基本表中增加列然后将其长度由改为地址添加地址修改删除在基本表中增加列并为其设置默认值为当前系统时间再删除该列日期在基本表中为列增加默认值为在基本表中将设置为唯一值应该是表删除唯一索引在基本表中创建索引应该是表删除受到外键影响在基本表中增加约束条件男生年龄小于岁女生年龄小于岁男女创建视图存放成绩高于分的选课信息显示学号课程号和成绩使用选项在视图中查询成绩高于的选课信息在视图中依次插入如下元组可插入成功这个错误是由于外键约束导致的在尝试向视图插入数据时检查了表的外键约束这个约束要求表中的字段的值必须在表的字段的值中存在换句话说你不能为一个不存在的学生分配成绩错误信息表明你尝试插入的值在表中不存在你需要先确保表中存在这个学生号然后再尝试插入数据你可以使用以下查询来检查表中是否存在这个学生号如果这个查询没有返回任何结果那么你需要先向表中插入这个学生号然后再尝试向插入数据在视图中依次修改如下元组将所对应的成绩改为可修改成功在视图中删除如下元组查询所有在之前出生的女同学的学号姓名性别出生日期女查询所有姓李的男同学的学号姓名性别出生日期李男查询所有用英文授课的教师号姓名及英语授课的门数英语授课的门数查询所有职称不是讲师的教师号姓名职称讲师讲师查询虽然选修了课程但未参加考试的所有同学的学号查询所有考试不及格的同学的学号成绩并按成绩降序排列降序升序并且默认为升序查询在年出生的教师号姓名出生日期也可以改成月份和年份查询各个课程号的选课人数查询讲授门课以上的教师号查询选修了课程的学生平均分数最低分数和最高分数此处课程号应为查询年以后出生的职称为讲师的教师的姓名出生日期并按出生日期升序排列讲师复杂数据查询问题创建视图显示所有同学的选课及成绩情况列出学生的学号姓名班号课程名称和成绩查看当前数据库中的所有视图删除视图关键字于定义视图结构在视图中查询软件班的同学的选课及成绩情况显示学号姓名课程名称成绩在视图中插入如下元组李在数据库系统此为不成功的操作查询所有同学的学分情况假设课程成绩时可获得该门课程的学分显示学号姓名总学分用查询所有同学的平均成绩及选课门数显示学号姓名平均成绩选课门数查询所有选修了课程但未参加考试的所有同学及相应的课程显示学号姓名课程号课程名称查询所有选修了课程但考试不及格的所有同学及相应的课程显示学号姓名课程号课程名称成绩查询选修了课程名为程序设计语言的所有同学及成绩情况显示学生姓名课程成绩用运算符程序设计语言查询软件开发系的所有同学及成绩情况显示学号姓名班级名称课程号课程名称成绩软件开发查询所有教师的任课情况显示教师姓名课程名称查询成绩低于同门课程平均成绩的信息显示学生学号姓名课程名称及低于平均成绩的值即比平均成绩低多少学号姓名课程名称低于平均成绩的值查询和葛畅在同一班级的同学的姓名使用子查询葛畅查询没有选修计算机基础课程的学生姓名用查询主讲数据库系统和主讲数据结构的教师姓名用数据库系统数据结构查询讲授了所有课程的教师的姓名查询同时选修学课程和的女同学的姓名女查询既未选修课程又未选修课程的学生姓名查询有一门课程成绩为分的女同学的姓名女查询选课数量大于门的女同学的姓名女查询平均成绩大于分的男同学的姓名姓名男查询徐永军老师所教的每一门课程的平均成绩查询男同学每一个年龄组的人数要求按人数升序输出人数超过人的年龄组男查询每门课程成绩都大于分的学生姓名查询比所有女同学年龄要大的男同学的姓名男女查询未选修课程的女同学的姓名女查询所有课程成绩都及格的学生姓名查询选修课所有课程的学生姓名查询选修了葛畅同学所选修的所有课程的学生姓名葛畅查询平均成绩最高的学生姓名找出比所在班级平均成绩高的学生信息数据操纵语言将选修徐永军老师所教课程的女同学的成绩提高女在基本表中检索每一门课程成绩都大于等于分的学生学号姓名性别并把检索到的值送往另一个已存在的基本表在基本表中删除尚无成绩的选课记录把王威同学的学习选课和成绩全部删除王威把选修数据结构课不及格的成绩全改为空值数据结构把低于总平均成绩的女同学的成绩提高女不允许在语句的子句中直接引用目标表我们需要使用一个临时表或者将子查询结果保存到一个变量中来解决这个问题这段代码首先创建一个临时表保存所有低于平均成绩的女同学的学号然后它更新表中的成绩将所有在临时表中的学号对应的成绩提高最后它删除临时表在基本表中修改课程的成绩若成绩小于等于分时提高若成绩大于分时提高用两个语句实现存储过程创建一个能向学生表中插入一条记录的存储过程该过程需要个参数分别用来传递学号姓名性别出生日期班级号写出调用存储过程的语句向数据表中插入一个新同学并提供相应的实参值廖学武男创建一个向课程表中插入一门新课程的存储过程该存储过程需要三个参数分别用来传递课程号课程名学分但允许参数学分的默认值为即当调用存储过程时未给第三个参数学分提供实参值时存储过程将按默认值进行运算调用存储过程向课程表中插入一门新课程分两种情况给出第三个参数和未给出第三个参数写出相应的命令并比较结果计算机科学数据结构创建一个名称为的存储过程该存储过程的功能是从数据表中根据学号查询某一同学的姓名性别出生日期班级号调用存储过程查询学号为的姓名性别出生日期班级号并写出完成此功能的命令建立存储过程输出平均成绩大于分的学生的姓名性别年龄和平均成绩调用该存储过程并输出相应的结果姓名性别年龄平均成绩写存储过程显示所有选择了与给定学生姓名选择的全部课程的学生的学号姓名选课数平均成绩总学分调用该存储过程并根据指定的学生姓名输出与其相应的结果学号姓名选课数平均成绩总学分胡贤斌写存储过程显示所有平均成绩小于给定班级号的平均成绩的学生的学号名字平均成绩调用该存储过程并根据指定的班级号输出与其相应的结果计算给定班级的平均成绩查询所有平均成绩小于给定班级平均成绩的学生触发器有问题创建一个当向学生表中插入一新同学时能自动列出全部同学信息的触发器执行存储过程向学生表中插入一个新同学看触发器是否被触发查看已创建的触发器创建一个触发器当向学生表中插入一新同学时能自动更新增加班级表中该生所在班级的总人数删除触发器创建一个触发器当从学生表中删除一个同学时能自动更新减班级表中该生所在班级的总人数创建一个触发器当将学生表中某一个同学从一个班级改为另一个班级时能自动更新班级表中该生所在原来班级的总人数减和新班级的总人数增加建一个触发器当往表中插入一个在表中不存在的学号时就往表中插入该学号其他属性全是写一个触发器阻止将学生成绩降低在表上创建触发器只要有人选修的课程超过门就中断操作并提示警告一个学生不能选修超过门课程创建一个触发器当往表插入选修的课程时自动将该课程的学分累加到表的该生的总学分中当从表中退课时自动从表的该生的总学分中减去该课程的学分当插入新的选课记录时增加学生的总学分当删除选课记录时减少学生的总学分',
  isPost: true,
  isHome: false,
  isHighlightShrink: true,
  isToc: true,
  postUpdate: '2024-09-17 00:06:54',
  postMainColor: '',
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#18171d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#f7f9fe')
        }
      }
      const t = saveToLocal.get('theme')
    
          const isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
          const isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
          const isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
          const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

          if (t === undefined) {
            if (isLightMode) activateLightMode()
            else if (isDarkMode) activateDarkMode()
            else if (isNotSpecified || hasNoSupport) {
              const now = new Date()
              const hour = now.getHours()
              const isNight = hour <= 6 || hour >= 18
              isNight ? activateDarkMode() : activateLightMode()
            }
            window.matchMedia('(prefers-color-scheme: dark)').addListener(e => {
              if (saveToLocal.get('theme') === undefined) {
                e.matches ? activateDarkMode() : activateLightMode()
              }
            })
          } else if (t === 'light') activateLightMode()
          else activateDarkMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><link rel="stylesheet" href="/css/chfychin.css" media="defer" onload="this.media='all'"><script async defer src="https://um.chfychin.cn/script.js" data-website-id="32b22793-1e41-42e2-936e-343222f38f4d"></script><!-- hexo injector head_end start --><link rel="stylesheet" href="https://cdn.cbd.int/hexo-butterfly-clock-anzhiyu/lib/clock.min.css" /><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-tag-plugins-plus@latest/lib/assets/font-awesome-animation.min.css" media="defer" onload="this.media='all'"><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-tag-plugins-plus@latest/lib/tag_plugins.css" media="defer" onload="this.media='all'"><script src="https://npm.elemecdn.com/hexo-butterfly-tag-plugins-plus@latest/lib/assets/carousel-touch.js"></script><!-- hexo injector head_end end --><meta name="generator" content="Hexo 6.3.0"><link rel="alternate" href="/atom.xml" title="Chfychin🥝" type="application/atom+xml">
</head><body data-type="anzhiyu"><div id="web_bg"></div><div id="an_music_bg"></div><div id="loading-box" onclick="document.getElementById(&quot;loading-box&quot;).classList.add(&quot;loaded&quot;)"><div class="loading-bg"><img class="loading-img nolazyload" alt="加载头像" src="/assets/head.jpg"/><div class="loading-image-dot"></div></div></div><script>const preloader = {
  endLoading: () => {
    document.getElementById('loading-box').classList.add("loaded");
  },
  initLoading: () => {
    document.getElementById('loading-box').classList.remove("loaded")
  }
}
window.addEventListener('load',()=> { preloader.endLoading() })
setTimeout(function(){preloader.endLoading();},10000)

if (true) {
  document.addEventListener('pjax:send', () => { preloader.initLoading() })
  document.addEventListener('pjax:complete', () => { preloader.endLoading() })
}</script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.1.10/progress_bar/progress_bar.css"/><script async="async" src="https://cdn.cbd.int/pace-js@1.2.4/pace.min.js" data-pace-options="{ &quot;restartOnRequestAfter&quot;:false,&quot;eventLag&quot;:false}"></script><div class="post" id="body-wrap"><header class="post-bg" id="page-header"><nav id="nav"><div id="nav-group"><span id="blog_name"><div class="back-home-button"><i class="anzhiyufont anzhiyu-icon-grip-vertical"></i><div class="back-menu-list-groups"><div class="back-menu-list-group"><div class="back-menu-list-title">网页</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://home.chfychin.cn/" title="Home"><img class="back-menu-item-icon" src="/img/favicon.ico" alt="Home"/><span class="back-menu-item-text">Home</span></a><a class="back-menu-item" target="_blank" rel="noopener" href="https://blog.chfychin.cn/" title="博客"><img class="back-menu-item-icon" src="/img/favicon.ico" alt="博客"/><span class="back-menu-item-text">博客</span></a></div></div></div></div><a id="site-name" href="/" accesskey="h"><div class="title">Chfychin🥝</div><i class="anzhiyufont anzhiyu-icon-house-chimney"></i></a><div id="he-plugin-simple"></div><script>var WIDGET = {
  "CONFIG": {
    "modules": "0124",
    "background": "2",
    "tmpColor": "FFFFFF",
    "tmpSize": "16",
    "cityColor": "FFFFFF",
    "citySize": "16",
    "aqiColor": "E8D87B",
    "aqiSize": "16",
    "weatherIconSize": "24",
    "alertIconSize": "18",
    "padding": "10px 10px 10px 10px",
    "shadow": "0",
    "language": "auto",
    "borderRadius": "20",
    "fixed": "true",
    "vertical": "top",
    "horizontal": "left",
    "left": "20",
    "top": "7.1",
    "key": "df245676fb434a0691ead1c63341cd94"
  }
}
</script><link rel="stylesheet" href="https://widget.qweather.net/simple/static/css/he-simple.css?v=1.4.0"/><script src="https://widget.qweather.net/simple/static/js/he-simple.js?v=1.4.0"></script></span><div class="mask-name-container"><div id="name-container"><a id="page-name" href="javascript:anzhiyu.scrollToDest(0, 500)">PAGE_NAME</a></div></div><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 文章</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/archives/"><i class="anzhiyufont anzhiyu-icon-box-archive faa-tada" style="font-size: 0.9em;"></i><span> 隧道</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/categories/"><i class="anzhiyufont anzhiyu-icon-shapes faa-tada" style="font-size: 0.9em;"></i><span> 分类</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags faa-tada" style="font-size: 0.9em;"></i><span> 标签</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 友链</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/social/link/"><i class="anzhiyufont anzhiyu-icon-link faa-tada" style="font-size: 0.9em;"></i><span> 友人帐</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/social/fcircle/"><i class="anzhiyufont anzhiyu-icon-artstation faa-tada" style="font-size: 0.9em;"></i><span> 博友圈</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/abouts/essay/"><i class="anzhiyufont anzhiyu-icon-lightbulb faa-tada" style="font-size: 0.9em;"></i><span> 朋友圈</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/social/comments/"><i class="anzhiyufont anzhiyu-icon-envelope faa-tada" style="font-size: 0.9em;"></i><span> 留言板</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 我的</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/music/"><i class="anzhiyufont anzhiyu-icon-music faa-tada" style="font-size: 0.9em;"></i><span> 音乐馆</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/personal/bangumis/"><i class="anzhiyufont anzhiyu-icon-bilibili faa-tada" style="font-size: 0.9em;"></i><span> 追番页</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/personal/love/"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-love"></use></svg><span> 情侣空间</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/personal/album/"><i class="anzhiyufont anzhiyu-icon-images faa-tada" style="font-size: 0.9em;"></i><span> 相册集</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 项目</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" target="_blank" rel="noopener" href="https://minicover.chfychin.cn/"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-fengmian"></use></svg><span> 封面</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/personal/air-conditioner/"><i class="anzhiyufont anzhiyu-icon-fan faa-tada" style="font-size: 0.9em;"></i><span> 小空调</span></a></li><li><a class="site-page child faa-parent animated-hover" target="_blank" rel="noopener" href="https://muyu.chfychin.cn/"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-muyu"></use></svg><span> 电子木鱼</span></a></li><li><a class="site-page child faa-parent animated-hover" target="_blank" rel="noopener" href="https://firework.chfychin.cn/"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-yanhua"></use></svg><span> 赛博烟花</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 工具</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" target="_blank" rel="noopener" href="https://wanglin2.github.io/mind-map/#/"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-siweidaotu"></use></svg><span> 思维导图</span></a></li><li><a class="site-page child faa-parent animated-hover" target="_blank" rel="noopener" href="https://it-tools.tech/"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-It"></use></svg><span> IT工具</span></a></li><li><a class="site-page child faa-parent animated-hover" target="_blank" rel="noopener" href="https://www.json.cn/"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-json"></use></svg><span> json在线解析</span></a></li><li><a class="site-page child faa-parent animated-hover" target="_blank" rel="noopener" href="https://calcium.js.org/"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-jisuanqi"></use></svg><span> 在线计算器</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 网站</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/site/census/"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-tongji1"></use></svg><span> 网站统计</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/site/charts/"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-tongji"></use></svg><span> 统计</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 关于</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/abouts/about/"><i class="anzhiyufont anzhiyu-icon-paper-plane faa-tada" style="font-size: 0.9em;"></i><span> 关于本人</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/abouts/equipment/"><i class="anzhiyufont anzhiyu-icon-dice-d20 faa-tada" style="font-size: 0.9em;"></i><span> 我的装备</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/abouts/anniversary/"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-niao"></use></svg><span> 喵喵纪念日</span></a></li><li><a class="site-page child faa-parent animated-hover" href="javascript:toRandomPost()"><i class="anzhiyufont anzhiyu-icon-shoe-prints1 faa-tada" style="font-size: 0.9em;"></i><span> 随便逛逛</span></a></li></ul></div></div></div><div id="nav-right"><div class="nav-button only-home" id="travellings_button" title="随机前往一个开往项目网站"><a class="site-page" onclick="anzhiyu.totraveling()" title="随机前往一个开往项目网站" href="javascript:void(0);" rel="external nofollow" data-pjax-state="external"><i class="anzhiyufont anzhiyu-icon-train"></i></a></div><div class="nav-button" id="randomPost_button"><a class="site-page" onclick="toRandomPost()" title="随机前往一个文章" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-dice"></i></a></div><div class="nav-button" id="search-button"><a class="site-page social-icon search" href="javascript:void(0);" title="搜索🔍" accesskey="s"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span> 搜索</span></a></div><input id="center-console" type="checkbox"/><label class="widget" for="center-console" title="中控台" onclick="anzhiyu.switchConsole();"><i class="left"></i><i class="widget center"></i><i class="widget right"></i></label><div id="console"><div class="console-card-group-reward"><ul class="reward-all console-card"><li class="reward-item"><a href="https://pcgdemo.chfychin.cn/img/pwechat.webp" target="_blank"><img class="post-qr-code-img" alt="微信" src="https://pcgdemo.chfychin.cn/img/pwechat.webp"/></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="https://pcgdemo.chfychin.cn/img/pzhifubao.webp" target="_blank"><img class="post-qr-code-img" alt="支付宝" src="https://pcgdemo.chfychin.cn/img/pzhifubao.webp"/></a><div class="post-qr-code-desc">支付宝</div></li></ul></div><div class="console-card-group"><div class="console-card-group-left"><div class="console-card" id="card-newest-comments"><div class="card-content"><div class="author-content-item-tips">互动</div><span class="author-content-item-title"> 最新评论</span></div><div class="aside-list"><span>正在加载中...</span></div></div></div><div class="console-card-group-right"><div class="console-card tags"><div class="card-content"><div class="author-content-item-tips">音乐</div><span class="author-content-item-title">灵魂的碰撞💥</span></div></div><div class="console-card history"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-box-archiv"></i><span>文章</span></div><div class="card-archives"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-archive"></i><span>归档</span><a class="card-more-btn" href="/archives/" title="查看更多">
    <i class="anzhiyufont anzhiyu-icon-angle-right"></i></a></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/05/"><span class="card-archive-list-date">五月 2025</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">1</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/12/"><span class="card-archive-list-date">十二月 2024</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">1</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/11/"><span class="card-archive-list-date">十一月 2024</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">1</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/10/"><span class="card-archive-list-date">十月 2024</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">3</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/09/"><span class="card-archive-list-date">九月 2024</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">2</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/08/"><span class="card-archive-list-date">八月 2024</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">2</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/07/"><span class="card-archive-list-date">七月 2024</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">1</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/06/"><span class="card-archive-list-date">六月 2024</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">4</span><span>篇</span></div></a></li></ul></div><hr/></div></div></div><div class="button-group"><div class="console-btn-item"><a class="darkmode_switchbutton" title="显示模式切换" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-moon"></i></a></div><div class="console-btn-item" id="consoleHideAside" onclick="anzhiyu.hideAsideBtn()" title="边栏显示控制"><a class="asideSwitch"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></a></div><div class="console-btn-item" id="consoleMusic" onclick="anzhiyu.musicToggle()" title="音乐开关"><a class="music-switch"><i class="anzhiyufont anzhiyu-icon-music"></i></a></div><div class="console-btn-item" id="consoleKeyboard" onclick="anzhiyu.keyboardToggle()" title="快捷键开关"><a class="keyboard-switch"><i class="anzhiyufont anzhiyu-icon-keyboard"></i></a></div></div><div class="console-mask" onclick="anzhiyu.hideConsole()" href="javascript:void(0);"></div></div><div class="nav-button" id="nav-totop"><a class="totopbtn" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i><span id="percent" onclick="anzhiyu.scrollToDest(0,500)">0</span></a></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);" title="切换"><i class="anzhiyufont anzhiyu-icon-bars"></i></a></div></div></div></nav><div id="post-info"><div id="post-firstinfo"><div class="meta-firstline"><a class="post-meta-original">原创</a><span class="post-meta-categories"><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-inbox post-meta-icon"></i><a class="post-meta-categories" href="/categories/Learning/" itemprop="url">Learning</a></span><span class="article-meta tags"><a class="article-meta__tags" href="/tags/SQL/" tabindex="-1" itemprop="url"> <span> <i class="anzhiyufont anzhiyu-icon-hashtag"></i>SQL</span></a></span></div></div><h1 class="post-title" itemprop="name headline">SQL</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="anzhiyufont anzhiyu-icon-calendar-days post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" itemprop="dateCreated datePublished" datetime="2024-09-14T13:03:44.000Z" title="发表于 2024-09-14 21:03:44">2024-09-14</time><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-history post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" itemprop="dateCreated datePublished" datetime="2024-09-16T16:06:54.000Z" title="更新于 2024-09-17 00:06:54">2024-09-17</time></span></div><div class="meta-secondline"><span class="post-meta-separator"></span><span class="post-meta-wordcount"><i class="anzhiyufont anzhiyu-icon-file-word post-meta-icon" title="文章字数"></i><span class="post-meta-label" title="文章字数">字数总计:</span><span class="word-count" title="文章字数">7k</span><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-clock post-meta-icon" title="阅读时长"></i><span class="post-meta-label" title="阅读时长">阅读时长:</span><span>31分钟</span></span><span class="post-meta-separator"></span><span class="post-meta-pv-cv" id="" data-flag-title="SQL"><i class="anzhiyufont anzhiyu-icon-fw-eye post-meta-icon"></i><span class="post-meta-label" title="阅读量">阅读量:</span><span id="busuanzi_value_page_pv"><i class="anzhiyufont anzhiyu-icon-spinner anzhiyu-spin"></i></span></span><span class="post-meta-separator">       </span><span class="post-meta-position" title="作者IP属地为安阳"><i class="anzhiyufont anzhiyu-icon-location-dot"></i>安阳</span></div></div></div><section class="main-hero-waves-area waves-area"><svg class="waves-svg" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M -160 44 c 30 0 58 -18 88 -18 s 58 18 88 18 s 58 -18 88 -18 s 58 18 88 18 v 44 h -352 Z"></path></defs><g class="parallax"><use href="#gentle-wave" x="48" y="0"></use><use href="#gentle-wave" x="48" y="3"></use><use href="#gentle-wave" x="48" y="5"></use><use href="#gentle-wave" x="48" y="7"></use></g></svg></section><div id="post-top-cover"><img class="nolazyload" id="post-top-bg" src="https://pcgdemo.chfychin.cn/img/default_cover_60.webp"></div></header><main id="blog-container"><div class="layout" id="content-inner"><div id="post"><div class="post-ai-description"><div class="ai-title"><i class="anzhiyufont anzhiyu-icon-bilibili"></i><div class="ai-title-text">AI-摘要</div><i class="anzhiyufont anzhiyu-icon-arrow-rotate-right"></i><i class="anzhiyufont anzhiyu-icon-circle-dot" title="朗读摘要"></i><div id="ai-tag">AnZhiYu GPT</div></div><div class="ai-explanation">AI初始化中...</div><div class="ai-btn-box"><div class="ai-btn-item">介绍自己 🙈</div><div class="ai-btn-item">生成本文简介 👋</div><div class="ai-btn-item">推荐相关文章 📖</div><div class="ai-btn-item">前往主页 🏠</div><div class="ai-btn-item" id="go-tianli-blog">前往爱发电购买</div></div><script data-pjax src="/js/anzhiyu/ai_abstract.js"></script></div><article class="post-content" id="article-container" itemscope itemtype="http://chfychin.cn/posts/4d712855.html"><header><a class="post-meta-categories" href="/categories/Learning/" itemprop="url">Learning</a><a href="/tags/SQL/" tabindex="-1" itemprop="url">SQL</a><h1 id="CrawlerTitle" itemprop="name headline">SQL</h1><span itemprop="author" itemscope itemtype="http://schema.org/Person">chfychin🥝</span><time itemprop="dateCreated datePublished" datetime="2024-09-14T13:03:44.000Z" title="发表于 2024-09-14 21:03:44">2024-09-14</time><time itemprop="dateCreated datePublished" datetime="2024-09-16T16:06:54.000Z" title="更新于 2024-09-17 00:06:54">2024-09-17</time></header><h1 id="创建数据表"><a href="#创建数据表" class="headerlink" title="创建数据表"></a>创建数据表</h1><h2 id="学生基本信息表student"><a href="#学生基本信息表student" class="headerlink" title="学生基本信息表student"></a>学生基本信息表student</h2><div class="table-container">
<table>
<thead>
<tr>
<th>字段名</th>
<th>字段类型</th>
<th>约束条件</th>
<th>字段含义说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>sno</td>
<td>Varchar2(8)</td>
<td>Primary key</td>
<td>学号</td>
</tr>
<tr>
<td>sname</td>
<td>Varchar2(8)</td>
<td>Not null</td>
<td>姓名</td>
</tr>
<tr>
<td>ssex</td>
<td>Varchar2(2)</td>
<td>‘男’或’女’</td>
<td>性别</td>
</tr>
<tr>
<td>sbirthday</td>
<td>date</td>
<td></td>
<td>出生日期</td>
</tr>
<tr>
<td>classno</td>
<td>Varchar2(6)</td>
<td>Foreign key</td>
<td>班级号</td>
</tr>
<tr>
<td>Totalcredit</td>
<td>Smallint</td>
<td>初值为0</td>
<td>已选修的总学分</td>
</tr>
</tbody>
</table>
</div>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> student (</span><br><span class="line">    sno <span class="type">VARCHAR</span>(<span class="number">8</span>) <span class="keyword">PRIMARY</span> KEY COMMENT <span class="string">&#x27;学号&#x27;</span>,</span><br><span class="line">    sname <span class="type">VARCHAR</span>(<span class="number">8</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;姓名&#x27;</span>,</span><br><span class="line">    ssex <span class="type">VARCHAR</span>(<span class="number">2</span>) <span class="keyword">CHECK</span> (ssex <span class="keyword">IN</span> (<span class="string">&#x27;男&#x27;</span>, <span class="string">&#x27;女&#x27;</span>)) COMMENT <span class="string">&#x27;性别&#x27;</span>,</span><br><span class="line">    sbirthday <span class="type">DATE</span> COMMENT <span class="string">&#x27;出生日期&#x27;</span>,</span><br><span class="line">    classno <span class="type">VARCHAR</span>(<span class="number">6</span>) COMMENT <span class="string">&#x27;班级号&#x27;</span>,</span><br><span class="line">    Totalcredit <span class="type">SMALLINT</span> <span class="keyword">DEFAULT</span> <span class="number">0</span> COMMENT <span class="string">&#x27;已选修的总学分&#x27;</span>,</span><br><span class="line">    <span class="keyword">FOREIGN</span> KEY (classno) <span class="keyword">REFERENCES</span> class(classno)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<h2 id="班级信息表class"><a href="#班级信息表class" class="headerlink" title="班级信息表class"></a>班级信息表class</h2><div class="table-container">
<table>
<thead>
<tr>
<th>字段名</th>
<th>字段类型</th>
<th>约束条件</th>
<th>字段含义说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>classno</td>
<td>Varchar2(6)</td>
<td>Primary key</td>
<td>班级号</td>
</tr>
<tr>
<td>classname</td>
<td>Varchar(20)</td>
<td>Not null</td>
<td>班级名称</td>
</tr>
<tr>
<td>classmajor</td>
<td>Varchar2(20)</td>
<td></td>
<td>所属专业</td>
</tr>
<tr>
<td>classdept</td>
<td>Varchar2(20)</td>
<td></td>
<td>所属系别</td>
</tr>
<tr>
<td>studentnumber</td>
<td>smallint</td>
<td>[20…40]</td>
<td>学生数</td>
</tr>
</tbody>
</table>
</div>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> class (</span><br><span class="line">    classno <span class="type">VARCHAR</span>(<span class="number">6</span>) <span class="keyword">PRIMARY</span> KEY COMMENT <span class="string">&#x27;班级号&#x27;</span>,</span><br><span class="line">    classname <span class="type">VARCHAR</span>(<span class="number">20</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;班级名称&#x27;</span>,</span><br><span class="line">    classmajor <span class="type">VARCHAR</span>(<span class="number">20</span>) COMMENT <span class="string">&#x27;所属专业&#x27;</span>,</span><br><span class="line">    classdept <span class="type">VARCHAR</span>(<span class="number">20</span>) COMMENT <span class="string">&#x27;所属系别&#x27;</span>,</span><br><span class="line">    studentnumber <span class="type">SMALLINT</span> <span class="keyword">CHECK</span> (studentnumber <span class="keyword">BETWEEN</span> <span class="number">20</span> <span class="keyword">AND</span> <span class="number">40</span>) COMMENT <span class="string">&#x27;学生数&#x27;</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<h2 id="课程信息表course"><a href="#课程信息表course" class="headerlink" title="课程信息表course"></a>课程信息表course</h2><div class="table-container">
<table>
<thead>
<tr>
<th>字段名</th>
<th>字段类型</th>
<th>约束条件</th>
<th>字段含义说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>cno</td>
<td>Varchar2 (6)</td>
<td>Primary key</td>
<td>课程号</td>
</tr>
<tr>
<td>cname</td>
<td>Varchar(30) Not null</td>
<td>课程名称</td>
</tr>
<tr>
<td>ccredit</td>
<td>smallint</td>
<td>[1…4]</td>
<td>学分</td>
</tr>
</tbody>
</table>
</div>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> course (</span><br><span class="line">    cno <span class="type">VARCHAR</span>(<span class="number">6</span>) <span class="keyword">PRIMARY</span> KEY COMMENT <span class="string">&#x27;课程号&#x27;</span>,</span><br><span class="line">    cname <span class="type">VARCHAR</span>(<span class="number">30</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;课程名称&#x27;</span>,</span><br><span class="line">    ccredit <span class="type">SMALLINT</span> <span class="keyword">CHECK</span> (ccredit <span class="keyword">BETWEEN</span> <span class="number">1</span> <span class="keyword">AND</span> <span class="number">4</span>) COMMENT <span class="string">&#x27;学分&#x27;</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<h2 id="选修课程信息表sc"><a href="#选修课程信息表sc" class="headerlink" title="选修课程信息表sc"></a>选修课程信息表sc</h2><div class="table-container">
<table>
<thead>
<tr>
<th>字段名</th>
<th>字段类型</th>
<th>约束条件</th>
<th>字段含义说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>sno</td>
<td>varchar (8)</td>
<td>Foreign key</td>
<td>学号</td>
</tr>
<tr>
<td>cno</td>
<td>varchar (6)</td>
<td>Foreign key</td>
<td>课程号</td>
</tr>
<tr>
<td>grade</td>
<td>integer</td>
<td>[0…100]</td>
<td>成绩</td>
</tr>
</tbody>
</table>
</div>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> sc (</span><br><span class="line">    sno <span class="type">VARCHAR</span>(<span class="number">8</span>) COMMENT <span class="string">&#x27;学号&#x27;</span>,</span><br><span class="line">    cno <span class="type">VARCHAR</span>(<span class="number">6</span>) COMMENT <span class="string">&#x27;课程号&#x27;</span>,</span><br><span class="line">    grade <span class="type">INTEGER</span> <span class="keyword">CHECK</span> (grade <span class="keyword">BETWEEN</span> <span class="number">0</span> <span class="keyword">AND</span> <span class="number">100</span>) COMMENT <span class="string">&#x27;成绩&#x27;</span>,</span><br><span class="line">    <span class="keyword">FOREIGN</span> KEY (sno) <span class="keyword">REFERENCES</span> student(sno),</span><br><span class="line">    <span class="keyword">FOREIGN</span> KEY (cno) <span class="keyword">REFERENCES</span> course(cno)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<h2 id="教师信息表teacher"><a href="#教师信息表teacher" class="headerlink" title="教师信息表teacher"></a>教师信息表teacher</h2><div class="table-container">
<table>
<thead>
<tr>
<th>字段名</th>
<th>字段类型</th>
<th>约束条件</th>
<th>字段含义说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>tno</td>
<td>Number(6)</td>
<td>Primary key</td>
<td>教师号</td>
</tr>
<tr>
<td>tname</td>
<td>Varchar2(8)</td>
<td>Not null</td>
<td>教师姓名</td>
</tr>
<tr>
<td>tsex</td>
<td>Varchar2(2)</td>
<td>‘男’或’女’</td>
<td>性别</td>
</tr>
<tr>
<td>tbirthday</td>
<td>date</td>
<td></td>
<td>出生日期</td>
</tr>
<tr>
<td>ttitle</td>
<td>Varchar2(20)</td>
<td></td>
<td>职称</td>
</tr>
</tbody>
</table>
</div>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> teacher (</span><br><span class="line">    tno <span class="type">INT</span>(<span class="number">6</span>) <span class="keyword">PRIMARY</span> KEY COMMENT <span class="string">&#x27;教师号&#x27;</span>,</span><br><span class="line">    tname <span class="type">VARCHAR</span>(<span class="number">8</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;教师姓名&#x27;</span>,</span><br><span class="line">    tsex <span class="type">VARCHAR</span>(<span class="number">2</span>) <span class="keyword">CHECK</span> (tsex <span class="keyword">IN</span> (<span class="string">&#x27;男&#x27;</span>, <span class="string">&#x27;女&#x27;</span>)) COMMENT <span class="string">&#x27;性别&#x27;</span>,</span><br><span class="line">    tbirthday <span class="type">DATE</span> COMMENT <span class="string">&#x27;出生日期&#x27;</span>,</span><br><span class="line">    ttitle <span class="type">VARCHAR</span>(<span class="number">20</span>) COMMENT <span class="string">&#x27;职称&#x27;</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<h2 id="教师任课情况表teaching"><a href="#教师任课情况表teaching" class="headerlink" title="教师任课情况表teaching"></a>教师任课情况表teaching</h2><div class="table-container">
<table>
<thead>
<tr>
<th>字段名</th>
<th>字段类型</th>
<th>约束条件</th>
<th>字段含义说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>tno</td>
<td>Number(6)</td>
<td>Foreign key</td>
<td>教师号</td>
</tr>
<tr>
<td>cno</td>
<td>Varchar (6)</td>
<td>Foreign key</td>
<td>课程号</td>
</tr>
<tr>
<td>language</td>
<td>Varchar2 (10)</td>
<td>Chinese, Bilingual, English</td>
<td>授课语言</td>
</tr>
</tbody>
</table>
</div>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> teaching (</span><br><span class="line">    tno <span class="type">INT</span>(<span class="number">6</span>) COMMENT <span class="string">&#x27;教师号&#x27;</span>,</span><br><span class="line">    cno <span class="type">VARCHAR</span>(<span class="number">6</span>) COMMENT <span class="string">&#x27;课程号&#x27;</span>,</span><br><span class="line">    <span class="keyword">language</span> <span class="type">VARCHAR</span>(<span class="number">10</span>) <span class="keyword">CHECK</span> (<span class="keyword">language</span> <span class="keyword">IN</span> (<span class="string">&#x27;Chinese&#x27;</span>, <span class="string">&#x27;Bilingual&#x27;</span>, <span class="string">&#x27;English&#x27;</span>)) COMMENT <span class="string">&#x27;授课语言&#x27;</span>,</span><br><span class="line">    <span class="keyword">FOREIGN</span> KEY (tno) <span class="keyword">REFERENCES</span> teacher(tno),</span><br><span class="line">    <span class="keyword">FOREIGN</span> KEY (cno) <span class="keyword">REFERENCES</span> course(cno)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<h1 id="插入数据"><a href="#插入数据" class="headerlink" title="插入数据"></a>插入数据</h1><h2 id="表student"><a href="#表student" class="headerlink" title="表student"></a>表student</h2><div class="table-container">
<table>
<thead>
<tr>
<th>sno</th>
<th>sname</th>
<th>ssex</th>
<th>sbirthday</th>
<th>classno</th>
</tr>
</thead>
<tbody>
<tr>
<td>08300010</td>
<td>李在</td>
<td>男</td>
<td>1991-10-1</td>
<td>Rj0801</td>
</tr>
<tr>
<td>08300012</td>
<td>葛畅</td>
<td>男</td>
<td>1990-8-8</td>
<td>Rj0801</td>
</tr>
<tr>
<td>08300015</td>
<td>刘晶</td>
<td>女</td>
<td>1990-5-22</td>
<td>Rj0801</td>
</tr>
<tr>
<td>08300020</td>
<td>杨敏</td>
<td>女</td>
<td>1989-1-8</td>
<td>Rj0801</td>
</tr>
<tr>
<td>08300030</td>
<td>胡贤斌</td>
<td>男</td>
<td>1990-10-8</td>
<td>Rj0801</td>
</tr>
<tr>
<td>08300048</td>
<td>赵鸿泽</td>
<td>男</td>
<td>1989-6-6</td>
<td>Rj0802</td>
</tr>
<tr>
<td>08300050</td>
<td>王威</td>
<td>男</td>
<td>1990-6-10</td>
<td>Rj0802</td>
</tr>
<tr>
<td>08300067</td>
<td>赵玮</td>
<td>女</td>
<td>1990-8-21</td>
<td>Rj0803</td>
</tr>
<tr>
<td>08300075</td>
<td>王娜娜</td>
<td>女</td>
<td>1991-9-23</td>
<td>Rj0803</td>
</tr>
<tr>
<td>08300088</td>
<td>秦键</td>
<td>男</td>
<td>1989-3-1</td>
<td>Rj0803</td>
</tr>
<tr>
<td>08300100</td>
<td>田邦仪</td>
<td>女</td>
<td>1990-2-26</td>
<td>Rj0804</td>
</tr>
<tr>
<td>08300148</td>
<td>赵心砚</td>
<td>男</td>
<td>1991-4-25</td>
<td>Rj0805</td>
</tr>
<tr>
<td>08300150</td>
<td>杨青</td>
<td>女</td>
<td>1989-11-15</td>
<td>Rj0805</td>
</tr>
<tr>
<td>08300160</td>
<td>杨玲玲</td>
<td>女</td>
<td>1990-12-12</td>
<td>Rj0806</td>
</tr>
</tbody>
</table>
</div>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> student (sno, sname, ssex, sbirthday, classno) <span class="keyword">VALUES</span></span><br><span class="line">(<span class="string">&#x27;08300010&#x27;</span>, <span class="string">&#x27;李在&#x27;</span>, <span class="string">&#x27;男&#x27;</span>, <span class="string">&#x27;1991-10-1&#x27;</span>, <span class="string">&#x27;Rj0801&#x27;</span>),</span><br><span class="line">(<span class="string">&#x27;08300012&#x27;</span>, <span class="string">&#x27;葛畅&#x27;</span>, <span class="string">&#x27;男&#x27;</span>, <span class="string">&#x27;1990-8-8&#x27;</span>, <span class="string">&#x27;Rj0801&#x27;</span>),</span><br><span class="line">(<span class="string">&#x27;08300015&#x27;</span>, <span class="string">&#x27;刘晶&#x27;</span>, <span class="string">&#x27;女&#x27;</span>, <span class="string">&#x27;1990-5-22&#x27;</span>, <span class="string">&#x27;Rj0801&#x27;</span>),</span><br><span class="line">(<span class="string">&#x27;08300020&#x27;</span>, <span class="string">&#x27;杨敏&#x27;</span>, <span class="string">&#x27;女&#x27;</span>, <span class="string">&#x27;1989-1-8&#x27;</span>, <span class="string">&#x27;Rj0801&#x27;</span>),</span><br><span class="line">(<span class="string">&#x27;08300030&#x27;</span>, <span class="string">&#x27;胡贤斌&#x27;</span>, <span class="string">&#x27;男&#x27;</span>, <span class="string">&#x27;1990-10-8&#x27;</span>, <span class="string">&#x27;Rj0801&#x27;</span>),</span><br><span class="line">(<span class="string">&#x27;08300048&#x27;</span>, <span class="string">&#x27;赵鸿泽&#x27;</span>, <span class="string">&#x27;男&#x27;</span>, <span class="string">&#x27;1989-6-6&#x27;</span>, <span class="string">&#x27;Rj0802&#x27;</span>),</span><br><span class="line">(<span class="string">&#x27;08300050&#x27;</span>, <span class="string">&#x27;王威&#x27;</span>, <span class="string">&#x27;男&#x27;</span>, <span class="string">&#x27;1990-6-10&#x27;</span>, <span class="string">&#x27;Rj0802&#x27;</span>),</span><br><span class="line">(<span class="string">&#x27;08300067&#x27;</span>, <span class="string">&#x27;赵玮&#x27;</span>, <span class="string">&#x27;女&#x27;</span>, <span class="string">&#x27;1990-8-21&#x27;</span>, <span class="string">&#x27;Rj0803&#x27;</span>),</span><br><span class="line">(<span class="string">&#x27;08300075&#x27;</span>, <span class="string">&#x27;王娜娜&#x27;</span>, <span class="string">&#x27;女&#x27;</span>, <span class="string">&#x27;1991-9-23&#x27;</span>, <span class="string">&#x27;Rj0803&#x27;</span>),</span><br><span class="line">(<span class="string">&#x27;08300088&#x27;</span>, <span class="string">&#x27;秦键&#x27;</span>, <span class="string">&#x27;男&#x27;</span>, <span class="string">&#x27;1989-3-1&#x27;</span>, <span class="string">&#x27;Rj0803&#x27;</span>),</span><br><span class="line">(<span class="string">&#x27;08300100&#x27;</span>, <span class="string">&#x27;田邦仪&#x27;</span>, <span class="string">&#x27;女&#x27;</span>, <span class="string">&#x27;1990-2-26&#x27;</span>, <span class="string">&#x27;Rj0804&#x27;</span>),</span><br><span class="line">(<span class="string">&#x27;08300148&#x27;</span>, <span class="string">&#x27;赵心砚&#x27;</span>, <span class="string">&#x27;男&#x27;</span>, <span class="string">&#x27;1991-4-25&#x27;</span>, <span class="string">&#x27;Rj0805&#x27;</span>),</span><br><span class="line">(<span class="string">&#x27;08300150&#x27;</span>, <span class="string">&#x27;杨青&#x27;</span>, <span class="string">&#x27;女&#x27;</span>, <span class="string">&#x27;1989-11-15&#x27;</span>, <span class="string">&#x27;Rj0805&#x27;</span>),</span><br><span class="line">(<span class="string">&#x27;08300160&#x27;</span>, <span class="string">&#x27;杨玲玲&#x27;</span>, <span class="string">&#x27;女&#x27;</span>, <span class="string">&#x27;1990-12-12&#x27;</span>, <span class="string">&#x27;Rj0806&#x27;</span>);</span><br></pre></td></tr></table></figure>
<h2 id="表class"><a href="#表class" class="headerlink" title="表class"></a>表class</h2><div class="table-container">
<table>
<thead>
<tr>
<th>classno</th>
<th>classname</th>
<th>Classs-major</th>
<th>classdept</th>
<th>studentnumber</th>
</tr>
</thead>
<tbody>
<tr>
<td>Rj0801</td>
<td>软件0801</td>
<td>软件工程</td>
<td>软件开发</td>
<td>24</td>
</tr>
<tr>
<td>Rj0802</td>
<td>软件0802</td>
<td>软件工程</td>
<td>软件开发</td>
<td>26</td>
</tr>
<tr>
<td>Rj0803</td>
<td>软件0803</td>
<td>软件工程</td>
<td>数字媒体</td>
<td>25</td>
</tr>
<tr>
<td>Rj0804</td>
<td>软件0804</td>
<td>软件工程</td>
<td>软件开发</td>
<td>25</td>
</tr>
<tr>
<td>Rj0805</td>
<td>软件0805</td>
<td>软件工程</td>
<td>数字媒体</td>
<td>24</td>
</tr>
<tr>
<td>Rj0806</td>
<td>软件0806</td>
<td>软件工程</td>
<td>软件开发</td>
<td>24</td>
</tr>
</tbody>
</table>
</div>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> class (classno, classname, Classs<span class="operator">-</span>major, classdept, studentnumber) <span class="keyword">VALUES</span></span><br><span class="line">(<span class="string">&#x27;Rj0801&#x27;</span>, <span class="string">&#x27;软件0801&#x27;</span>, <span class="string">&#x27;软件工程&#x27;</span>, <span class="string">&#x27;软件开发&#x27;</span>, <span class="number">24</span>),</span><br><span class="line">(<span class="string">&#x27;Rj0802&#x27;</span>, <span class="string">&#x27;软件0802&#x27;</span>, <span class="string">&#x27;软件工程&#x27;</span>, <span class="string">&#x27;软件开发&#x27;</span>, <span class="number">26</span>),</span><br><span class="line">(<span class="string">&#x27;Rj0803&#x27;</span>, <span class="string">&#x27;软件0803&#x27;</span>, <span class="string">&#x27;软件工程&#x27;</span>, <span class="string">&#x27;数字媒体&#x27;</span>, <span class="number">25</span>),</span><br><span class="line">(<span class="string">&#x27;Rj0804&#x27;</span>, <span class="string">&#x27;软件0804&#x27;</span>, <span class="string">&#x27;软件工程&#x27;</span>, <span class="string">&#x27;软件开发&#x27;</span>, <span class="number">25</span>),</span><br><span class="line">(<span class="string">&#x27;Rj0805&#x27;</span>, <span class="string">&#x27;软件0805&#x27;</span>, <span class="string">&#x27;软件工程&#x27;</span>, <span class="string">&#x27;数字媒体&#x27;</span>, <span class="number">24</span>),</span><br><span class="line">(<span class="string">&#x27;Rj0806&#x27;</span>, <span class="string">&#x27;软件0806&#x27;</span>, <span class="string">&#x27;软件工程&#x27;</span>, <span class="string">&#x27;软件开发&#x27;</span>, <span class="number">24</span>);</span><br></pre></td></tr></table></figure>
<h2 id="表course"><a href="#表course" class="headerlink" title="表course"></a>表course</h2><div class="table-container">
<table>
<thead>
<tr>
<th>cno</th>
<th>cname</th>
<th>credit</th>
</tr>
</thead>
<tbody>
<tr>
<td>800001</td>
<td>计算机基础</td>
<td>4</td>
</tr>
<tr>
<td>800002</td>
<td>程序设计语言</td>
<td>4</td>
</tr>
<tr>
<td>800003</td>
<td>数据结构</td>
<td>4</td>
</tr>
<tr>
<td>810011</td>
<td>数据库系统</td>
<td>4</td>
</tr>
<tr>
<td>810013</td>
<td>计算机网络</td>
<td>3</td>
</tr>
<tr>
<td>810015</td>
<td>微机原理与应用</td>
<td>4</td>
</tr>
</tbody>
</table>
</div>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> course (cno, cname, credit) <span class="keyword">VALUES</span></span><br><span class="line">(<span class="number">800001</span>, <span class="string">&#x27;计算机基础&#x27;</span>, <span class="number">4</span>),</span><br><span class="line">(<span class="number">800002</span>, <span class="string">&#x27;程序设计语言&#x27;</span>, <span class="number">4</span>),</span><br><span class="line">(<span class="number">800003</span>, <span class="string">&#x27;数据结构&#x27;</span>, <span class="number">4</span>),</span><br><span class="line">(<span class="number">810011</span>, <span class="string">&#x27;数据库系统&#x27;</span>, <span class="number">4</span>),</span><br><span class="line">(<span class="number">810013</span>, <span class="string">&#x27;计算机网络&#x27;</span>, <span class="number">3</span>),</span><br><span class="line">(<span class="number">810015</span>, <span class="string">&#x27;微机原理与应用&#x27;</span>, <span class="number">4</span>);</span><br></pre></td></tr></table></figure>
<h2 id="表sc"><a href="#表sc" class="headerlink" title="表sc"></a>表sc</h2><div class="table-container">
<table>
<thead>
<tr>
<th>sno</th>
<th>cno</th>
<th>grade</th>
</tr>
</thead>
<tbody>
<tr>
<td>08300012</td>
<td>800003</td>
<td>88</td>
</tr>
<tr>
<td>08300015</td>
<td>800003</td>
<td></td>
</tr>
<tr>
<td>08300020</td>
<td>800003</td>
<td>91</td>
</tr>
<tr>
<td>08300030</td>
<td>800003</td>
<td>78</td>
</tr>
<tr>
<td>08300048</td>
<td>800003</td>
<td>95</td>
</tr>
<tr>
<td>08300100</td>
<td>810011</td>
<td>67</td>
</tr>
<tr>
<td>08300148</td>
<td>810011</td>
<td>58</td>
</tr>
<tr>
<td>08300150</td>
<td>810011</td>
<td>89</td>
</tr>
<tr>
<td>08300160</td>
<td>810011</td>
<td>71</td>
</tr>
</tbody>
</table>
</div>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> sc (sno, cno, grade) <span class="keyword">VALUES</span></span><br><span class="line">(<span class="string">&#x27;08300012&#x27;</span>, <span class="number">800003</span>, <span class="number">88</span>),</span><br><span class="line">(<span class="string">&#x27;08300015&#x27;</span>, <span class="number">800003</span>, <span class="keyword">NULL</span>),</span><br><span class="line">(<span class="string">&#x27;08300020&#x27;</span>, <span class="number">800003</span>, <span class="number">91</span>),</span><br><span class="line">(<span class="string">&#x27;08300030&#x27;</span>, <span class="number">800003</span>, <span class="number">78</span>),</span><br><span class="line">(<span class="string">&#x27;08300048&#x27;</span>, <span class="number">800003</span>, <span class="number">95</span>),</span><br><span class="line">(<span class="string">&#x27;08300100&#x27;</span>, <span class="number">810011</span>, <span class="number">67</span>),</span><br><span class="line">(<span class="string">&#x27;08300148&#x27;</span>, <span class="number">810011</span>, <span class="number">58</span>),</span><br><span class="line">(<span class="string">&#x27;08300150&#x27;</span>, <span class="number">810011</span>, <span class="number">89</span>),</span><br><span class="line">(<span class="string">&#x27;08300160&#x27;</span>, <span class="number">810011</span>, <span class="number">71</span>);</span><br></pre></td></tr></table></figure>
<h2 id="表teacher"><a href="#表teacher" class="headerlink" title="表teacher"></a>表teacher</h2><div class="table-container">
<table>
<thead>
<tr>
<th>tno</th>
<th>tname</th>
<th>tsex</th>
<th>tbirthday</th>
<th>ttitle</th>
</tr>
</thead>
<tbody>
<tr>
<td>000001</td>
<td>李英</td>
<td>女</td>
<td>1975-11-3</td>
<td>讲师</td>
</tr>
<tr>
<td>000002</td>
<td>王大山</td>
<td>男</td>
<td>1969-3-2</td>
<td>副教授</td>
</tr>
<tr>
<td>000003</td>
<td>张朋</td>
<td>男</td>
<td>1970-2-13</td>
<td>讲师</td>
</tr>
<tr>
<td>000004</td>
<td>陈为军</td>
<td>男</td>
<td>1985-8-14</td>
<td>助教</td>
</tr>
<tr>
<td>000005</td>
<td>宋浩然</td>
<td>男</td>
<td>1976-4-23</td>
<td>讲师</td>
</tr>
<tr>
<td>000006</td>
<td>许红霞</td>
<td>女</td>
<td>1966-2-12</td>
<td>副教授</td>
</tr>
<tr>
<td>000007</td>
<td>徐永军</td>
<td>男</td>
<td>1962-1-24</td>
<td>教授</td>
</tr>
<tr>
<td>000008</td>
<td>李桂菁</td>
<td>女</td>
<td>1960-12-15</td>
<td>教授</td>
</tr>
<tr>
<td>000009</td>
<td>王一凡</td>
<td>女</td>
<td>1974-12-8</td>
<td>讲师</td>
</tr>
<tr>
<td>000010</td>
<td>田峰</td>
<td>男</td>
<td>1988-1-18</td>
<td>助教</td>
</tr>
</tbody>
</table>
</div>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> teacher (tno, tname, tsex, tbirthday, ttitle) <span class="keyword">VALUES</span></span><br><span class="line">(<span class="string">&#x27;000001&#x27;</span>, <span class="string">&#x27;李英&#x27;</span>, <span class="string">&#x27;女&#x27;</span>, <span class="string">&#x27;1975-11-3&#x27;</span>, <span class="string">&#x27;讲师&#x27;</span>),</span><br><span class="line">(<span class="string">&#x27;000002&#x27;</span>, <span class="string">&#x27;王大山&#x27;</span>, <span class="string">&#x27;男&#x27;</span>, <span class="string">&#x27;1969-3-2&#x27;</span>, <span class="string">&#x27;副教授&#x27;</span>),</span><br><span class="line">(<span class="string">&#x27;000003&#x27;</span>, <span class="string">&#x27;张朋&#x27;</span>, <span class="string">&#x27;男&#x27;</span>, <span class="string">&#x27;1970-2-13&#x27;</span>, <span class="string">&#x27;讲师&#x27;</span>),</span><br><span class="line">(<span class="string">&#x27;000004&#x27;</span>, <span class="string">&#x27;陈为军&#x27;</span>, <span class="string">&#x27;男&#x27;</span>, <span class="string">&#x27;1985-8-14&#x27;</span>, <span class="string">&#x27;助教&#x27;</span>),</span><br><span class="line">(<span class="string">&#x27;000005&#x27;</span>, <span class="string">&#x27;宋浩然&#x27;</span>, <span class="string">&#x27;男&#x27;</span>, <span class="string">&#x27;1976-4-23&#x27;</span>, <span class="string">&#x27;讲师&#x27;</span>),</span><br><span class="line">(<span class="string">&#x27;000006&#x27;</span>, <span class="string">&#x27;许红霞&#x27;</span>, <span class="string">&#x27;女&#x27;</span>, <span class="string">&#x27;1966-2-12&#x27;</span>, <span class="string">&#x27;副教授&#x27;</span>),</span><br><span class="line">(<span class="string">&#x27;000007&#x27;</span>, <span class="string">&#x27;徐永军&#x27;</span>, <span class="string">&#x27;男&#x27;</span>, <span class="string">&#x27;1962-1-24&#x27;</span>, <span class="string">&#x27;教授&#x27;</span>),</span><br><span class="line">(<span class="string">&#x27;000008&#x27;</span>, <span class="string">&#x27;李桂菁&#x27;</span>, <span class="string">&#x27;女&#x27;</span>, <span class="string">&#x27;1960-12-15&#x27;</span>, <span class="string">&#x27;教授&#x27;</span>),</span><br><span class="line">(<span class="string">&#x27;000009&#x27;</span>, <span class="string">&#x27;王一凡&#x27;</span>, <span class="string">&#x27;女&#x27;</span>, <span class="string">&#x27;1974-12-8&#x27;</span>, <span class="string">&#x27;讲师&#x27;</span>),</span><br><span class="line">(<span class="string">&#x27;000010&#x27;</span>, <span class="string">&#x27;田峰&#x27;</span>, <span class="string">&#x27;男&#x27;</span>, <span class="string">&#x27;1988-1-18&#x27;</span>, <span class="string">&#x27;助教&#x27;</span>);</span><br></pre></td></tr></table></figure>
<h2 id="表teaching"><a href="#表teaching" class="headerlink" title="表teaching"></a>表teaching</h2><div class="table-container">
<table>
<thead>
<tr>
<th>cno</th>
<th>tno</th>
<th>Language</th>
</tr>
</thead>
<tbody>
<tr>
<td>800001</td>
<td>000001</td>
<td>English</td>
</tr>
<tr>
<td>800002</td>
<td>000002</td>
<td>Chinese</td>
</tr>
<tr>
<td>800003</td>
<td>000002</td>
<td>Bilingual</td>
</tr>
<tr>
<td>810011</td>
<td>000003</td>
<td>Chinese</td>
</tr>
<tr>
<td>810013</td>
<td>000004</td>
<td>English</td>
</tr>
<tr>
<td>800001</td>
<td>000005</td>
<td>Chinese</td>
</tr>
<tr>
<td>800002</td>
<td>000006</td>
<td>Chinese</td>
</tr>
<tr>
<td>800003</td>
<td>000007</td>
<td>English</td>
</tr>
<tr>
<td>810011</td>
<td>000007</td>
<td>English</td>
</tr>
<tr>
<td>810013</td>
<td>000008</td>
<td>Bilingual</td>
</tr>
</tbody>
</table>
</div>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> teaching (cno, tno, <span class="keyword">language</span>) <span class="keyword">VALUES</span></span><br><span class="line">(<span class="number">800001</span>, <span class="number">1</span>, <span class="string">&#x27;English&#x27;</span>),</span><br><span class="line">(<span class="number">800002</span>, <span class="number">2</span>, <span class="string">&#x27;Chinese&#x27;</span>),</span><br><span class="line">(<span class="number">800003</span>, <span class="number">2</span>, <span class="string">&#x27;Bilingual&#x27;</span>),</span><br><span class="line">(<span class="number">810011</span>, <span class="number">3</span>, <span class="string">&#x27;Chinese&#x27;</span>),</span><br><span class="line">(<span class="number">810013</span>, <span class="number">4</span>, <span class="string">&#x27;English&#x27;</span>),</span><br><span class="line">(<span class="number">800001</span>, <span class="number">5</span>, <span class="string">&#x27;Chinese&#x27;</span>),</span><br><span class="line">(<span class="number">800002</span>, <span class="number">6</span>, <span class="string">&#x27;Chinese&#x27;</span>),</span><br><span class="line">(<span class="number">800003</span>, <span class="number">7</span>, <span class="string">&#x27;English&#x27;</span>),</span><br><span class="line">(<span class="number">810011</span>, <span class="number">7</span>, <span class="string">&#x27;English&#x27;</span>),</span><br><span class="line">(<span class="number">810013</span>, <span class="number">8</span>, <span class="string">&#x27;Bilingual&#x27;</span>);</span><br></pre></td></tr></table></figure>
<h1 id="简单的数据操作"><a href="#简单的数据操作" class="headerlink" title="简单的数据操作"></a>简单的数据操作</h1><h2 id="1"><a href="#1" class="headerlink" title="1"></a>1</h2><ul>
<li>[x] 查询所有同学的所有基本信息。<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> student;</span><br></pre></td></tr></table></figure>
<h2 id="2"><a href="#2" class="headerlink" title="2"></a>2</h2></li>
<li>[x] 查询所有男同学的学号、姓名、出生日期。<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> sno, sname, sbirthday <span class="keyword">FROM</span> student <span class="keyword">WHERE</span> ssex <span class="operator">=</span> <span class="string">&#x27;男&#x27;</span>;</span><br></pre></td></tr></table></figure>
<h2 id="3"><a href="#3" class="headerlink" title="3"></a>3</h2></li>
<li>[x] 在基本表 <code>student</code> 中增加 <code>addr</code>：<code>varchar(20)</code> 列，然后将其长度由 20 改为 25。<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> student <span class="keyword">ADD</span> <span class="keyword">COLUMN</span> addr <span class="type">VARCHAR</span>(<span class="number">20</span>) comment &quot;地址&quot;;     <span class="comment">-- 添加</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> student MODIFY <span class="keyword">COLUMN</span> addr <span class="type">VARCHAR</span>(<span class="number">25</span>) comment &quot;地址&quot;;  <span class="comment">-- 修改</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> student <span class="keyword">DROP</span> <span class="keyword">COLUMN</span> addr;   <span class="comment">-- 删除</span></span><br></pre></td></tr></table></figure>
<h2 id="4"><a href="#4" class="headerlink" title="4"></a>4</h2></li>
<li>[x] 在基本表 <code>student</code> 中增加 <code>register_date</code>：<code>date</code> 列，并为其设置默认值为当前系统时间，再删除该列。<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> student <span class="keyword">ADD</span> register_date DATETIME <span class="keyword">DEFAULT</span> <span class="built_in">CURRENT_TIMESTAMP</span> COMMENT <span class="string">&#x27;日期&#x27;</span>;</span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> student <span class="keyword">DROP</span> <span class="keyword">COLUMN</span> register_date;</span><br></pre></td></tr></table></figure>
<h2 id="5"><a href="#5" class="headerlink" title="5"></a>5</h2></li>
<li>[x] 在基本表 <code>student</code> 中为 <code>age</code> 列，增加默认值为 <code>18</code>。<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> student MODIFY <span class="keyword">COLUMN</span> age <span class="type">INT</span> <span class="keyword">DEFAULT</span> <span class="number">18</span>;</span><br></pre></td></tr></table></figure>
<h2 id="6"><a href="#6" class="headerlink" title="6"></a>6</h2></li>
<li>[x] 在基本表 sc 中将 sname 设置为唯一值（unique）。（应该是student表）<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> sc <span class="keyword">ADD</span> <span class="keyword">CONSTRAINT</span> unique_sname <span class="keyword">UNIQUE</span> (sname);</span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> sc <span class="keyword">ADD</span> <span class="keyword">CONSTRAINT</span> unique_sname <span class="keyword">UNIQUE</span> (sname); <span class="comment">-- 删除唯一索引</span></span><br></pre></td></tr></table></figure>
<h2 id="7"><a href="#7" class="headerlink" title="7"></a>7</h2></li>
<li>[x] 在基本表 course 中创建索引：（sno，cno desc）。（应该是sc表）<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> INDEX idx_sno_cno_desc <span class="keyword">ON</span> course (sno, cno <span class="keyword">DESC</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 删除受到外键影响</span></span><br></pre></td></tr></table></figure>
<h2 id="8"><a href="#8" class="headerlink" title="8"></a>8</h2></li>
<li>[x] 在基本表 student 中增加约束条件：男生年龄小于 23 岁，女生年龄小于 21 岁。<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> student CHANGE sbirthday sage <span class="type">INT</span>;</span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> student <span class="keyword">ADD</span> <span class="keyword">CONSTRAINT</span> check_age <span class="keyword">CHECK</span> (</span><br><span class="line">    (ssex <span class="operator">=</span> <span class="string">&#x27;男&#x27;</span> <span class="keyword">AND</span> sage <span class="operator">&lt;</span> <span class="number">23</span>) <span class="keyword">OR</span></span><br><span class="line">    (ssex <span class="operator">=</span> <span class="string">&#x27;女&#x27;</span> <span class="keyword">AND</span> sage <span class="operator">&lt;</span> <span class="number">21</span>)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<h2 id="9"><a href="#9" class="headerlink" title="9"></a>9</h2></li>
<li>[x] 创建视图 View_80，存放成绩高于 80 分的选课信息，显示学号、课程号和成绩，使用 WITH CHECK OPTION 选项。<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">VIEW</span> View_80 <span class="keyword">AS</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> sc <span class="keyword">WHERE</span> grade <span class="operator">&gt;</span> <span class="number">80</span></span><br><span class="line"><span class="keyword">WITH</span> <span class="keyword">CHECK</span> OPTION;</span><br></pre></td></tr></table></figure>
<h2 id="10"><a href="#10" class="headerlink" title="10"></a>10</h2></li>
<li>[x] 在视图 View_80 中查询成绩高于 90 的选课信息。<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> View_80 <span class="keyword">WHERE</span> grade <span class="operator">&gt;</span> <span class="number">90</span>;</span><br></pre></td></tr></table></figure>
<h2 id="11"><a href="#11" class="headerlink" title="11"></a>11</h2></li>
<li>[x] 在视图 View_80 中依次插入如下元组：08301168，810011，87（可插入成功）</li>
</ul>
<p>这个错误是由于外键约束导致的。在尝试向View_80视图插入数据时，MySQL检查了sc表的外键约束sc_ibfk_1。这个约束要求，sc表中的sno字段的值必须在student表的sno字段的值中存在。换句话说，你不能为一个不存在的学生分配成绩。</p>
<p>错误信息表明，你尝试插入的sno值（‘08301168’）在student表中不存在。你需要先确保student表中存在这个学生号，然后再尝试插入数据。</p>
<p>你可以使用以下SQL查询来检查student表中是否存在这个学生号：<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> student <span class="keyword">WHERE</span> sno <span class="operator">=</span> <span class="string">&#x27;08301168&#x27;</span>;</span><br></pre></td></tr></table></figure><br>如果这个查询没有返回任何结果，那么你需要先向student表中插入这个学生号，然后再尝试向View_80插入数据。</p>
<h2 id="12"><a href="#12" class="headerlink" title="12"></a>12</h2><ul>
<li>[x] 在视图 View_80 中依次修改如下元组：将（08301168，810011）所对应的成绩改为 90（可修改成功）<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">UPDATE</span> View_80 <span class="keyword">SET</span> grade <span class="operator">=</span> <span class="number">90</span> <span class="keyword">WHERE</span> sno <span class="operator">=</span> <span class="string">&#x27;08301168&#x27;</span> <span class="keyword">AND</span> cno <span class="operator">=</span> <span class="string">&#x27;810011&#x27;</span>;</span><br></pre></td></tr></table></figure>
<h2 id="13"><a href="#13" class="headerlink" title="13"></a>13</h2></li>
<li>[x] 在视图 View_80 中删除如下元组：sno=08301168，cno=810011<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DELETE</span> <span class="keyword">FROM</span> View_80 <span class="keyword">WHERE</span> sno <span class="operator">=</span> <span class="string">&#x27;08301168&#x27;</span> <span class="keyword">AND</span> cno <span class="operator">=</span> <span class="string">&#x27;810011&#x27;</span>;</span><br></pre></td></tr></table></figure>
<h2 id="14"><a href="#14" class="headerlink" title="14"></a>14</h2></li>
<li>[x] 查询所有在“1980-01-01”之前出生的女同学的学号、姓名、性别、出生日期。<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> sno, sname, ssex, sbirthday </span><br><span class="line"><span class="keyword">FROM</span> student </span><br><span class="line"><span class="keyword">WHERE</span> sbirthday <span class="operator">&lt;</span> <span class="string">&#x27;1980-01-01&#x27;</span> <span class="keyword">AND</span> ssex <span class="operator">=</span> <span class="string">&#x27;女&#x27;</span>;</span><br></pre></td></tr></table></figure>
<h2 id="15"><a href="#15" class="headerlink" title="15"></a>15</h2></li>
<li>[x] 查询所有姓“李”的男同学的学号、姓名、性别、出生日期。<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> sno, sname, ssex, sbirthday </span><br><span class="line"><span class="keyword">FROM</span> student </span><br><span class="line"><span class="keyword">WHERE</span> sname <span class="keyword">LIKE</span> <span class="string">&#x27;李%&#x27;</span> <span class="keyword">AND</span> ssex <span class="operator">=</span> <span class="string">&#x27;男&#x27;</span>;</span><br></pre></td></tr></table></figure>
<h2 id="16"><a href="#16" class="headerlink" title="16"></a>16</h2></li>
<li>[x] 查询所有用英文授课的教师号、姓名及英语授课的门数。<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> t.tno, t.tname, <span class="built_in">COUNT</span>(te.cno) <span class="keyword">AS</span> <span class="string">&#x27;英语授课的门数&#x27;</span></span><br><span class="line"><span class="keyword">FROM</span> teacher t</span><br><span class="line"><span class="keyword">JOIN</span> teaching te <span class="keyword">ON</span> t.tno <span class="operator">=</span> te.tno</span><br><span class="line"><span class="keyword">WHERE</span> te.language <span class="operator">=</span> <span class="string">&#x27;English&#x27;</span></span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> t.tno, t.tname;</span><br></pre></td></tr></table></figure>
<h2 id="17"><a href="#17" class="headerlink" title="17"></a>17</h2></li>
<li>[x] 查询所有职称不是“讲师”的教师号、姓名、职称。<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> tno, tname, ttitle </span><br><span class="line"><span class="keyword">FROM</span> teacher </span><br><span class="line"><span class="keyword">WHERE</span> ttitle <span class="operator">&lt;&gt;</span> <span class="string">&#x27;讲师&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> tno, tname, ttitle </span><br><span class="line"><span class="keyword">FROM</span> teacher </span><br><span class="line"><span class="keyword">WHERE</span> ttitle <span class="operator">!=</span> <span class="string">&#x27;讲师&#x27;</span>;</span><br></pre></td></tr></table></figure>
<h2 id="18"><a href="#18" class="headerlink" title="18"></a>18</h2></li>
<li>[x] 查询虽然选修了课程，但未参加考试的所有同学的学号。<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> sno </span><br><span class="line"><span class="keyword">from</span> sc </span><br><span class="line"><span class="keyword">where</span> grade <span class="keyword">is</span> <span class="keyword">null</span>;</span><br></pre></td></tr></table></figure>
<h2 id="19"><a href="#19" class="headerlink" title="19"></a>19</h2></li>
<li>[x] 查询所有考试不及格的同学的学号、成绩，并按成绩降序排列。（降序desc升序asc并且默认为升序）<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> sno, grade </span><br><span class="line"><span class="keyword">FROM</span> sc </span><br><span class="line"><span class="keyword">WHERE</span> grade <span class="operator">&lt;</span> <span class="number">60</span> </span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> grade <span class="keyword">DESC</span>;</span><br></pre></td></tr></table></figure>
<h2 id="20"><a href="#20" class="headerlink" title="20"></a>20</h2></li>
<li>[x] 查询在1970年出生的教师号、姓名、出生日期。（也可以改成月份和年份）<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> tno, tname, tbirthday </span><br><span class="line"><span class="keyword">FROM</span> teacher </span><br><span class="line"><span class="keyword">WHERE</span> <span class="keyword">YEAR</span>(tbirthday) <span class="operator">=</span> <span class="number">1970</span>;</span><br></pre></td></tr></table></figure>
<h2 id="21"><a href="#21" class="headerlink" title="21"></a>21</h2></li>
<li>[x] 查询各个课程号的选课人数。<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> cno, <span class="built_in">COUNT</span>(<span class="operator">*</span>) <span class="keyword">AS</span> student_count</span><br><span class="line"><span class="keyword">FROM</span> sc</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> cno;</span><br></pre></td></tr></table></figure>
<h2 id="22"><a href="#22" class="headerlink" title="22"></a>22</h2></li>
<li>[x] 查询讲授2门课以上的教师号。<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> tno</span><br><span class="line"><span class="keyword">FROM</span> teaching</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> tno</span><br><span class="line"><span class="keyword">HAVING</span> <span class="built_in">COUNT</span>(<span class="operator">*</span>) <span class="operator">&gt;=</span> <span class="number">2</span>;</span><br></pre></td></tr></table></figure>
<h2 id="23"><a href="#23" class="headerlink" title="23"></a>23</h2></li>
<li>[x] 查询选修了 800001 课程的学生平均分数、最低分数和最高分数。（此处课程号应为810011）<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="built_in">avg</span>(grade), <span class="built_in">min</span>(grade), <span class="built_in">max</span>(grade)</span><br><span class="line"><span class="keyword">from</span> sc</span><br><span class="line"><span class="keyword">where</span> cno <span class="operator">=</span> <span class="string">&#x27;810011&#x27;</span>;</span><br></pre></td></tr></table></figure>
<h2 id="24"><a href="#24" class="headerlink" title="24"></a>24</h2></li>
<li>[x] 查询1960年以后出生的，职称为讲师的教师的姓名、出生日期，并按出生日期升序排列。<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> tname, tbirthday </span><br><span class="line"><span class="keyword">FROM</span> teacher </span><br><span class="line"><span class="keyword">WHERE</span> ttitle <span class="operator">=</span> <span class="string">&#x27;讲师&#x27;</span> <span class="keyword">AND</span> tbirthday <span class="operator">&gt;</span> <span class="string">&#x27;1960-01-01&#x27;</span> </span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> tbirthday <span class="keyword">ASC</span>;</span><br></pre></td></tr></table></figure>
<h1 id="复杂数据查询-3问题"><a href="#复杂数据查询-3问题" class="headerlink" title="复杂数据查询 3问题"></a>复杂数据查询 3问题</h1><h2 id="1-1"><a href="#1-1" class="headerlink" title="1"></a>1</h2></li>
<li>[x] （1）创建视图 new_View 显示所有同学的选课及成绩情况，列出学生的学号、姓名、班号、课程名称和成绩。<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 查看当前数据库中的所有视图</span></span><br><span class="line"><span class="keyword">SHOW</span> <span class="keyword">FULL</span> TABLES <span class="keyword">IN</span> your_database_name <span class="keyword">WHERE</span> TABLE_TYPE <span class="keyword">LIKE</span> <span class="string">&#x27;VIEW&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 删除视图</span></span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">VIEW</span> view_you_create;</span><br></pre></td></tr></table></figure>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- AS关键字于定义视图结构</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">VIEW</span> new_View <span class="keyword">AS</span></span><br><span class="line"><span class="keyword">SELECT</span> s.sno, s.sname, s.classno, c.cname, sc.grade</span><br><span class="line"><span class="keyword">FROM</span> student s</span><br><span class="line"><span class="keyword">JOIN</span> sc <span class="keyword">ON</span> s.sno <span class="operator">=</span> sc.sno</span><br><span class="line"><span class="keyword">JOIN</span> course c <span class="keyword">ON</span> sc.cno <span class="operator">=</span> c.cno;</span><br></pre></td></tr></table></figure>
<h2 id="2-1"><a href="#2-1" class="headerlink" title="2"></a>2</h2></li>
<li>[x] （2）在视图 new_View 中查询“软件0801”班的同学的选课及成绩情况，显示学号、姓名、课程名称、成绩。<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> sno, sname, cname, grade</span><br><span class="line"><span class="keyword">FROM</span> new_View</span><br><span class="line"><span class="keyword">WHERE</span> classno <span class="operator">=</span> <span class="string">&#x27;Rj0801&#x27;</span>;</span><br></pre></td></tr></table></figure>
<h2 id="3-1"><a href="#3-1" class="headerlink" title="3"></a>3</h2></li>
<li>[x] （3）在视图 new_View 中插入如下元组：08300010，李在，R,j0801，数据库系统，88（此为不成功的操作）<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">```</span><br><span class="line">## <span class="number">4</span></span><br><span class="line"><span class="operator">-</span> [x] （<span class="number">4</span>）查询所有同学的学分情况（假设课程成绩<span class="operator">&gt;=</span><span class="number">60</span>时可获得该门课程的学分），显示学号、姓名、总学分（用 <span class="keyword">JOIN</span>）。</span><br><span class="line">```<span class="keyword">SQL</span></span><br><span class="line"><span class="keyword">SELECT</span> s.sno, s.sname, <span class="built_in">SUM</span>(IF(sc.grade <span class="operator">&gt;=</span> <span class="number">60</span>, c.ccredit, <span class="number">0</span>)) <span class="keyword">AS</span> total_credit</span><br><span class="line"><span class="keyword">FROM</span> student s</span><br><span class="line"><span class="keyword">LEFT</span> <span class="keyword">JOIN</span> sc <span class="keyword">ON</span> s.sno <span class="operator">=</span> sc.sno</span><br><span class="line"><span class="keyword">LEFT</span> <span class="keyword">JOIN</span> course c <span class="keyword">ON</span> sc.cno <span class="operator">=</span> c.cno</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> s.sno, s.sname;</span><br></pre></td></tr></table></figure>
<h2 id="5-1"><a href="#5-1" class="headerlink" title="5"></a>5</h2></li>
<li>[x] （5）查询所有同学的平均成绩及选课门数，显示学号、姓名、平均成绩、选课门数。<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> s.sno, s.sname, <span class="built_in">AVG</span>(sc.grade) <span class="keyword">AS</span> avg_grade, <span class="built_in">COUNT</span>(sc.cno) <span class="keyword">AS</span> course_count</span><br><span class="line"><span class="keyword">FROM</span> student s</span><br><span class="line"><span class="keyword">LEFT</span> <span class="keyword">JOIN</span> sc <span class="keyword">ON</span> s.sno <span class="operator">=</span> sc.sno</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> s.sno, s.sname;</span><br></pre></td></tr></table></figure>
<h2 id="6-1"><a href="#6-1" class="headerlink" title="6"></a>6</h2></li>
<li>[x] （6）查询所有选修了课程但未参加考试的所有同学及相应的课程，显示学号、姓名、课程号、课程名称。<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> s.sno, s.sname, sc.cno, c.cname</span><br><span class="line"><span class="keyword">FROM</span> student s</span><br><span class="line"><span class="keyword">JOIN</span> sc <span class="keyword">ON</span> s.sno <span class="operator">=</span> sc.sno</span><br><span class="line"><span class="keyword">JOIN</span> course c <span class="keyword">ON</span> sc.cno <span class="operator">=</span> c.cno</span><br><span class="line"><span class="keyword">WHERE</span> sc.grade <span class="keyword">IS</span> <span class="keyword">NULL</span>;</span><br></pre></td></tr></table></figure>
<h2 id="7-1"><a href="#7-1" class="headerlink" title="7"></a>7</h2></li>
<li>[x] （7）查询所有选修了课程但考试不及格的所有同学及相应的课程，显示学号、姓名、课程号、课程名称、成绩。<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> s.sno, s.sname, sc.cno, c.cname, sc.grade</span><br><span class="line"><span class="keyword">FROM</span> student s</span><br><span class="line"><span class="keyword">JOIN</span> sc <span class="keyword">ON</span> s.sno <span class="operator">=</span> sc.sno</span><br><span class="line"><span class="keyword">JOIN</span> course c <span class="keyword">ON</span> sc.cno <span class="operator">=</span> c.cno</span><br><span class="line"><span class="keyword">WHERE</span> sc.grade <span class="operator">&lt;</span> <span class="number">60</span>;</span><br></pre></td></tr></table></figure>
<h2 id="8-1"><a href="#8-1" class="headerlink" title="8"></a>8</h2></li>
<li>[x] （8）查询选修了课程名为“程序设计语言”的所有同学及成绩情况，显示学生姓名、课程成绩（用 ANY 运算符）。<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> s.sname, sc.grade</span><br><span class="line"><span class="keyword">FROM</span> student s</span><br><span class="line"><span class="keyword">JOIN</span> sc <span class="keyword">ON</span> s.sno <span class="operator">=</span> sc.sno</span><br><span class="line"><span class="keyword">WHERE</span> sc.cno <span class="operator">=</span> <span class="keyword">ANY</span> (<span class="keyword">SELECT</span> cno <span class="keyword">FROM</span> course <span class="keyword">WHERE</span> cname <span class="operator">=</span> <span class="string">&#x27;程序设计语言&#x27;</span>);</span><br></pre></td></tr></table></figure>
<h2 id="9-1"><a href="#9-1" class="headerlink" title="9"></a>9</h2></li>
<li>[x] （9）查询“软件开发系”的所有同学及成绩情况，显示学号、姓名、班级名称、课程号、课程名称、成绩。<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> s.sno, s.sname, cl.classname, sc.cno, c.cname, sc.grade</span><br><span class="line"><span class="keyword">FROM</span> student s</span><br><span class="line"><span class="keyword">JOIN</span> sc <span class="keyword">ON</span> s.sno <span class="operator">=</span> sc.sno</span><br><span class="line"><span class="keyword">JOIN</span> course c <span class="keyword">ON</span> sc.cno <span class="operator">=</span> c.cno</span><br><span class="line"><span class="keyword">JOIN</span> class cl <span class="keyword">ON</span> s.classno <span class="operator">=</span> cl.classno</span><br><span class="line"><span class="keyword">WHERE</span> cl.classdept <span class="operator">=</span> <span class="string">&#x27;软件开发&#x27;</span>;</span><br></pre></td></tr></table></figure>
<h1 id="10-1"><a href="#10-1" class="headerlink" title="10"></a>10</h1></li>
<li>[x] （10）查询所有教师的任课情况，显示教师姓名、课程名称。<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> t.tname, c.cname</span><br><span class="line"><span class="keyword">FROM</span> teacher t</span><br><span class="line"><span class="keyword">JOIN</span> teaching tc <span class="keyword">ON</span> t.tno <span class="operator">=</span> tc.tno</span><br><span class="line"><span class="keyword">JOIN</span> course c <span class="keyword">ON</span> tc.cno <span class="operator">=</span> c.cno;</span><br></pre></td></tr></table></figure>
<h2 id="11-1"><a href="#11-1" class="headerlink" title="11"></a>11</h2></li>
<li>[x] （11）查询成绩低于同门课程平均成绩的信息，显示学生学号、姓名、课程名称及低于平均成绩的值（即比平均成绩低多少）。<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> </span><br><span class="line">    student.sno <span class="keyword">AS</span> <span class="string">&#x27;学号&#x27;</span>,</span><br><span class="line">    student.sname <span class="keyword">AS</span> <span class="string">&#x27;姓名&#x27;</span>,</span><br><span class="line">    course.cname <span class="keyword">AS</span> <span class="string">&#x27;课程名称&#x27;</span>,</span><br><span class="line">    (avg_grade <span class="operator">-</span> sc.grade) <span class="keyword">AS</span> <span class="string">&#x27;低于平均成绩的值&#x27;</span></span><br><span class="line"><span class="keyword">FROM</span> student </span><br><span class="line"><span class="keyword">JOIN</span> sc <span class="keyword">ON</span> student.sno <span class="operator">=</span> sc.sno</span><br><span class="line"><span class="keyword">JOIN</span> course <span class="keyword">ON</span> sc.cno <span class="operator">=</span> course.cno</span><br><span class="line"><span class="keyword">JOIN</span> (<span class="keyword">SELECT</span> cno, <span class="built_in">AVG</span>(grade) <span class="keyword">AS</span> avg_grade <span class="keyword">FROM</span> sc <span class="keyword">GROUP</span> <span class="keyword">BY</span> cno) <span class="keyword">AS</span> avg_sc <span class="keyword">ON</span> sc.cno <span class="operator">=</span> avg_sc.cno</span><br><span class="line"><span class="keyword">WHERE</span> sc.grade <span class="operator">&lt;</span> avg_sc.avg_grade;</span><br></pre></td></tr></table></figure>
<h2 id="12-1"><a href="#12-1" class="headerlink" title="12"></a>12</h2></li>
<li>[x] （12）查询和“葛畅”在同一班级的同学的姓名（使用子查询）。<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> sname</span><br><span class="line"><span class="keyword">FROM</span> student</span><br><span class="line"><span class="keyword">WHERE</span> classno <span class="operator">=</span> (<span class="keyword">SELECT</span> classno <span class="keyword">FROM</span> student <span class="keyword">WHERE</span> sname <span class="operator">=</span> <span class="string">&#x27;葛畅&#x27;</span>);</span><br></pre></td></tr></table></figure>
<h2 id="13-1"><a href="#13-1" class="headerlink" title="13"></a>13</h2></li>
<li>[x] （13）查询没有选修“计算机基础”课程的学生姓名（用 NOT EXISTS）。<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> sname</span><br><span class="line"><span class="keyword">FROM</span> student s</span><br><span class="line"><span class="keyword">WHERE</span> <span class="keyword">NOT</span> <span class="keyword">EXISTS</span> (<span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> sc <span class="keyword">WHERE</span> s.sno <span class="operator">=</span> sc.sno <span class="keyword">AND</span> sc.cno <span class="operator">=</span> <span class="string">&#x27;800001&#x27;</span>);</span><br></pre></td></tr></table></figure>
<h2 id="14-1"><a href="#14-1" class="headerlink" title="14"></a>14</h2></li>
<li>[x] （14）查询主讲“数据库系统”和主讲“数据结构”的教师姓名（用 UNION）。<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> tname</span><br><span class="line"><span class="keyword">FROM</span> teacher</span><br><span class="line"><span class="keyword">WHERE</span> tno <span class="keyword">IN</span> (<span class="keyword">SELECT</span> tno <span class="keyword">FROM</span> teaching <span class="keyword">WHERE</span> cno <span class="keyword">IN</span> (<span class="keyword">SELECT</span> cno <span class="keyword">FROM</span> course <span class="keyword">WHERE</span> cname <span class="operator">=</span> <span class="string">&#x27;数据库系统&#x27;</span>))</span><br><span class="line"></span><br><span class="line"><span class="keyword">UNION</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> tname</span><br><span class="line"><span class="keyword">FROM</span> teacher</span><br><span class="line"><span class="keyword">WHERE</span> tno <span class="keyword">IN</span> (<span class="keyword">SELECT</span> tno <span class="keyword">FROM</span> teaching <span class="keyword">WHERE</span> cno <span class="keyword">IN</span> (<span class="keyword">SELECT</span> cno <span class="keyword">FROM</span> course <span class="keyword">WHERE</span> cname <span class="operator">=</span> <span class="string">&#x27;数据结构&#x27;</span>));</span><br></pre></td></tr></table></figure>
<h2 id="15-1"><a href="#15-1" class="headerlink" title="15"></a>15</h2></li>
<li>[x] （15）查询讲授了所有课程的教师的姓名。<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> tname</span><br><span class="line"><span class="keyword">FROM</span> teacher</span><br><span class="line"><span class="keyword">WHERE</span> tno <span class="keyword">IN</span> (</span><br><span class="line">    <span class="keyword">SELECT</span> tno</span><br><span class="line">    <span class="keyword">FROM</span> teaching</span><br><span class="line">    <span class="keyword">GROUP</span> <span class="keyword">BY</span> tno</span><br><span class="line">    <span class="keyword">HAVING</span> <span class="built_in">COUNT</span>(<span class="keyword">DISTINCT</span> cno</span><br><span class="line"></span><br><span class="line">) <span class="operator">=</span> (<span class="keyword">SELECT</span> <span class="built_in">COUNT</span>(<span class="operator">*</span>) <span class="keyword">FROM</span> course)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<h2 id="16-1"><a href="#16-1" class="headerlink" title="16"></a>16</h2></li>
<li>[x] （16）查询同时选修学课程800001和800002的女同学的姓名。<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">DISTINCT</span> sname</span><br><span class="line"><span class="keyword">FROM</span> student s</span><br><span class="line"><span class="keyword">JOIN</span> sc sc1 <span class="keyword">ON</span> s.sno <span class="operator">=</span> sc1.sno <span class="keyword">AND</span> sc1.cno <span class="operator">=</span> <span class="string">&#x27;800001&#x27;</span></span><br><span class="line"><span class="keyword">JOIN</span> sc sc2 <span class="keyword">ON</span> s.sno <span class="operator">=</span> sc2.sno <span class="keyword">AND</span> sc2.cno <span class="operator">=</span> <span class="string">&#x27;800002&#x27;</span></span><br><span class="line"><span class="keyword">WHERE</span> s.ssex <span class="operator">=</span> <span class="string">&#x27;女&#x27;</span>;</span><br></pre></td></tr></table></figure>
<h2 id="17-1"><a href="#17-1" class="headerlink" title="17"></a>17</h2></li>
<li>[x] （17）查询既未选修课程800001又未选修课程800002的学生姓名。<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> sname</span><br><span class="line"><span class="keyword">FROM</span> student</span><br><span class="line"><span class="keyword">WHERE</span> sno <span class="keyword">NOT</span> <span class="keyword">IN</span> (</span><br><span class="line">    <span class="keyword">SELECT</span> sno <span class="keyword">FROM</span> sc <span class="keyword">WHERE</span> cno <span class="operator">=</span> <span class="string">&#x27;800001&#x27;</span></span><br><span class="line">) <span class="keyword">AND</span> sno <span class="keyword">NOT</span> <span class="keyword">IN</span> (</span><br><span class="line">    <span class="keyword">SELECT</span> sno <span class="keyword">FROM</span> sc <span class="keyword">WHERE</span> cno <span class="operator">=</span> <span class="string">&#x27;800002&#x27;</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<h2 id="18-1"><a href="#18-1" class="headerlink" title="18"></a>18</h2></li>
<li>[x] （18）查询有一门课程成绩为95分的女同学的姓名。<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> sname</span><br><span class="line"><span class="keyword">FROM</span> student s</span><br><span class="line"><span class="keyword">JOIN</span> sc <span class="keyword">ON</span> s.sno <span class="operator">=</span> sc.sno</span><br><span class="line"><span class="keyword">WHERE</span> s.ssex <span class="operator">=</span> <span class="string">&#x27;女&#x27;</span> <span class="keyword">AND</span> sc.grade <span class="operator">=</span> <span class="number">95</span>;</span><br></pre></td></tr></table></figure>
<h2 id="19-1"><a href="#19-1" class="headerlink" title="19"></a>19</h2></li>
<li>[x] （19）查询选课数量大于3门的女同学的姓名。<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> sname</span><br><span class="line"><span class="keyword">FROM</span> (</span><br><span class="line">    <span class="keyword">SELECT</span> sno, <span class="built_in">COUNT</span>(<span class="operator">*</span>) <span class="keyword">AS</span> course_count</span><br><span class="line">    <span class="keyword">FROM</span> sc</span><br><span class="line">    <span class="keyword">GROUP</span> <span class="keyword">BY</span> sno</span><br><span class="line">) <span class="keyword">AS</span> course_counts</span><br><span class="line"><span class="keyword">JOIN</span> student <span class="keyword">ON</span> course_counts.sno <span class="operator">=</span> student.sno</span><br><span class="line"><span class="keyword">WHERE</span> ssex <span class="operator">=</span> <span class="string">&#x27;女&#x27;</span> <span class="keyword">AND</span> course_count <span class="operator">&gt;</span> <span class="number">3</span>;</span><br></pre></td></tr></table></figure>
<h2 id="20-1"><a href="#20-1" class="headerlink" title="20"></a>20</h2></li>
<li>[x] （20）查询平均成绩大于80分的男同学的姓名。<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> </span><br><span class="line">    student.sname <span class="keyword">AS</span> <span class="string">&#x27;姓名&#x27;</span></span><br><span class="line"><span class="keyword">FROM</span> student </span><br><span class="line"><span class="keyword">JOIN</span> (<span class="keyword">SELECT</span> sno, <span class="built_in">AVG</span>(grade) <span class="keyword">AS</span> avg_grade <span class="keyword">FROM</span> sc <span class="keyword">GROUP</span> <span class="keyword">BY</span> sno) <span class="keyword">AS</span> avg_sc <span class="keyword">ON</span> student.sno <span class="operator">=</span> avg_sc.sno</span><br><span class="line"><span class="keyword">WHERE</span> avg_sc.avg_grade <span class="operator">&gt;</span> <span class="number">80</span> <span class="keyword">AND</span> student.ssex <span class="operator">=</span> <span class="string">&#x27;男&#x27;</span>;</span><br></pre></td></tr></table></figure>
<h2 id="21-1"><a href="#21-1" class="headerlink" title="21"></a>21</h2></li>
<li>[x] （21）查询徐永军老师所教的每一门课程的平均成绩。<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> c.cname, <span class="built_in">AVG</span>(sc.grade) <span class="keyword">AS</span> avg_grade</span><br><span class="line"><span class="keyword">FROM</span> teaching t</span><br><span class="line"><span class="keyword">JOIN</span> sc <span class="keyword">ON</span> t.cno <span class="operator">=</span> sc.cno</span><br><span class="line"><span class="keyword">JOIN</span> course c <span class="keyword">ON</span> t.cno <span class="operator">=</span> c.cno</span><br><span class="line"><span class="keyword">WHERE</span> t.tno <span class="operator">=</span> <span class="string">&#x27;000007&#x27;</span></span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> c.cname;</span><br></pre></td></tr></table></figure>
<h2 id="22-1"><a href="#22-1" class="headerlink" title="22"></a>22</h2></li>
<li>[x] （22）查询男同学每一个年龄组的人数，要求按人数升序输出人数超过20人的年龄组。<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="built_in">FLOOR</span>((<span class="keyword">YEAR</span>(<span class="built_in">CURRENT_DATE</span>) <span class="operator">-</span> <span class="keyword">YEAR</span>(sbirthday)) <span class="operator">/</span> <span class="number">10</span>) <span class="keyword">AS</span> age_group, <span class="built_in">COUNT</span>(<span class="operator">*</span>) <span class="keyword">AS</span> student_count</span><br><span class="line"><span class="keyword">FROM</span> student</span><br><span class="line"><span class="keyword">WHERE</span> ssex <span class="operator">=</span> <span class="string">&#x27;男&#x27;</span></span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> age_group</span><br><span class="line"><span class="keyword">HAVING</span> student_count <span class="operator">&gt;</span> <span class="number">20</span></span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> student_count <span class="keyword">ASC</span>;</span><br></pre></td></tr></table></figure>
<h2 id="23-1"><a href="#23-1" class="headerlink" title="23"></a>23</h2></li>
<li>[x] （23）查询每门课程成绩都大于90分的学生姓名。<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> sname</span><br><span class="line"><span class="keyword">FROM</span> student s</span><br><span class="line"><span class="keyword">WHERE</span> <span class="keyword">NOT</span> <span class="keyword">EXISTS</span> (</span><br><span class="line">    <span class="keyword">SELECT</span> <span class="operator">*</span></span><br><span class="line">    <span class="keyword">FROM</span> course c</span><br><span class="line">    <span class="keyword">WHERE</span> <span class="keyword">NOT</span> <span class="keyword">EXISTS</span> (</span><br><span class="line">        <span class="keyword">SELECT</span> <span class="operator">*</span></span><br><span class="line">        <span class="keyword">FROM</span> sc</span><br><span class="line">        <span class="keyword">WHERE</span> s.sno <span class="operator">=</span> sc.sno <span class="keyword">AND</span> c.cno <span class="operator">=</span> sc.cno <span class="keyword">AND</span> grade <span class="operator">&gt;</span> <span class="number">90</span></span><br><span class="line">    )</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<h2 id="24-1"><a href="#24-1" class="headerlink" title="24"></a>24</h2></li>
<li>[x] （24）查询比所有女同学年龄要大的男同学的姓名。<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> sname</span><br><span class="line"><span class="keyword">FROM</span> student</span><br><span class="line"><span class="keyword">WHERE</span> ssex <span class="operator">=</span> <span class="string">&#x27;男&#x27;</span> <span class="keyword">AND</span> <span class="keyword">YEAR</span>(sbirthday) <span class="operator">&lt;</span> (</span><br><span class="line">    <span class="keyword">SELECT</span> <span class="built_in">MIN</span>(<span class="keyword">YEAR</span>(sbirthday))</span><br><span class="line">    <span class="keyword">FROM</span> student</span><br><span class="line">    <span class="keyword">WHERE</span> ssex <span class="operator">=</span> <span class="string">&#x27;女&#x27;</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<h2 id="25"><a href="#25" class="headerlink" title="25"></a>25</h2></li>
<li>[x] （25）查询未选修 800002 课程的女同学的姓名。<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> sname</span><br><span class="line"><span class="keyword">FROM</span> student</span><br><span class="line"><span class="keyword">WHERE</span> ssex <span class="operator">=</span> <span class="string">&#x27;女&#x27;</span> <span class="keyword">AND</span> sno <span class="keyword">NOT</span> <span class="keyword">IN</span> (</span><br><span class="line">    <span class="keyword">SELECT</span> sno <span class="keyword">FROM</span> sc <span class="keyword">WHERE</span> cno <span class="operator">=</span> <span class="string">&#x27;800002&#x27;</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<h2 id="26"><a href="#26" class="headerlink" title="26"></a>26</h2></li>
<li>[x] （26）查询所有课程成绩都及格的学生姓名。<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> sname</span><br><span class="line"><span class="keyword">FROM</span> student</span><br><span class="line"><span class="keyword">WHERE</span> sno <span class="keyword">NOT</span> <span class="keyword">IN</span> (</span><br><span class="line">    <span class="keyword">SELECT</span> sno</span><br><span class="line">    <span class="keyword">FROM</span> sc</span><br><span class="line">    <span class="keyword">WHERE</span> grade <span class="operator">&lt;</span> <span class="number">60</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<h2 id="27"><a href="#27" class="headerlink" title="27"></a>27</h2></li>
<li>[x] （27）查询选修课所有课程的学生姓名。<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> sname</span><br><span class="line"><span class="keyword">FROM</span> student</span><br><span class="line"><span class="keyword">WHERE</span> sno <span class="keyword">IN</span> (</span><br><span class="line">    <span class="keyword">SELECT</span> sno</span><br><span class="line">    <span class="keyword">FROM</span> sc</span><br><span class="line">    <span class="keyword">GROUP</span> <span class="keyword">BY</span> sno</span><br><span class="line">    <span class="keyword">HAVING</span> <span class="built_in">COUNT</span>(<span class="keyword">DISTINCT</span> cno) <span class="operator">=</span> (<span class="keyword">SELECT</span> <span class="built_in">COUNT</span>(<span class="operator">*</span>) <span class="keyword">FROM</span> course)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<h2 id="28"><a href="#28" class="headerlink" title="28"></a>28</h2></li>
<li>[x] （28）查询选修了葛畅同学所选修的所有课程的学生姓名。<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> sname</span><br><span class="line"><span class="keyword">FROM</span> student</span><br><span class="line"><span class="keyword">WHERE</span> sno <span class="keyword">IN</span> (</span><br><span class="line">    <span class="keyword">SELECT</span> sno <span class="keyword">FROM</span> sc <span class="keyword">WHERE</span> cno <span class="keyword">IN</span> (</span><br><span class="line">        <span class="keyword">SELECT</span> cno <span class="keyword">FROM</span> sc <span class="keyword">WHERE</span> sno <span class="operator">=</span> (<span class="keyword">SELECT</span> sno <span class="keyword">FROM</span> student <span class="keyword">WHERE</span> sname <span class="operator">=</span> <span class="string">&#x27;葛畅&#x27;</span>)</span><br><span class="line">    )</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<h2 id="29"><a href="#29" class="headerlink" title="29"></a>29</h2></li>
<li>[x] （29）查询平均成绩最高的学生姓名。<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> sname</span><br><span class="line"><span class="keyword">FROM</span> (</span><br><span class="line">    <span class="keyword">SELECT</span> sno, <span class="built_in">AVG</span>(grade) <span class="keyword">AS</span> avg_grade</span><br><span class="line">    <span class="keyword">FROM</span> sc</span><br><span class="line">    <span class="keyword">GROUP</span> <span class="keyword">BY</span> sno</span><br><span class="line">    <span class="keyword">ORDER</span> <span class="keyword">BY</span> avg_grade <span class="keyword">DESC</span></span><br><span class="line">    LIMIT <span class="number">1</span></span><br><span class="line">) <span class="keyword">AS</span> highest_avg_grade</span><br><span class="line"><span class="keyword">JOIN</span> student <span class="keyword">ON</span> highest_avg_grade.sno <span class="operator">=</span> student.sno;</span><br></pre></td></tr></table></figure>
<h2 id="30"><a href="#30" class="headerlink" title="30"></a>30</h2></li>
<li>[x] （30）找出比所在班级平均成绩高的学生信息。<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> s.sno, s.sname, s.classno, sc.grade</span><br><span class="line"><span class="keyword">FROM</span> student s</span><br><span class="line"><span class="keyword">JOIN</span> sc <span class="keyword">ON</span> s.sno <span class="operator">=</span> sc.sno</span><br><span class="line"><span class="keyword">WHERE</span> sc.grade <span class="operator">&gt;</span> (</span><br><span class="line">    <span class="keyword">SELECT</span> <span class="built_in">AVG</span>(sc.grade)</span><br><span class="line">    <span class="keyword">FROM</span> student s2</span><br><span class="line">    <span class="keyword">JOIN</span> sc <span class="keyword">ON</span> s2.sno <span class="operator">=</span> sc.sno</span><br><span class="line">    <span class="keyword">WHERE</span> s2.classno <span class="operator">=</span> s.classno</span><br><span class="line">    <span class="keyword">GROUP</span> <span class="keyword">BY</span> s2.classno</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<h1 id="数据操纵语言DML"><a href="#数据操纵语言DML" class="headerlink" title="数据操纵语言DML"></a>数据操纵语言DML</h1></li>
<li><p>[x] （1） 将选修徐永军老师所教课程的女同学的成绩提高5%</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">UPDATE</span> sc</span><br><span class="line"><span class="keyword">SET</span> grade <span class="operator">=</span> grade <span class="operator">*</span> <span class="number">1.05</span></span><br><span class="line"><span class="keyword">WHERE</span> cno <span class="keyword">IN</span> (<span class="keyword">SELECT</span> cno <span class="keyword">FROM</span> teaching <span class="keyword">WHERE</span> tno <span class="operator">=</span> <span class="string">&#x27;000007&#x27;</span>) <span class="keyword">AND</span> sno <span class="keyword">IN</span> (<span class="keyword">SELECT</span> sno <span class="keyword">FROM</span> student <span class="keyword">WHERE</span> ssex <span class="operator">=</span> <span class="string">&#x27;女&#x27;</span>);</span><br></pre></td></tr></table></figure>
<p>（2） 在基本表Student中检索每一门课程成绩都大于等于80分的学生学号、姓名、性别，并把检索到的值送往另一个已存在的基本表STUD（S#，SNAME，SEX）。</p>
</li>
<li><p>[x] （3） 在基本表sc中删除尚无成绩的选课记录。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DELETE</span> <span class="keyword">FROM</span> sc <span class="keyword">WHERE</span> grade <span class="keyword">IS</span> <span class="keyword">NULL</span>;</span><br></pre></td></tr></table></figure></li>
<li>[x] （4） 把王威同学的学习选课和成绩全部删除。<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DELETE</span> <span class="keyword">FROM</span> sc <span class="keyword">WHERE</span> sno <span class="operator">=</span> (<span class="keyword">SELECT</span> sno <span class="keyword">FROM</span> student <span class="keyword">WHERE</span> sname <span class="operator">=</span> <span class="string">&#x27;王威&#x27;</span>);</span><br></pre></td></tr></table></figure></li>
<li>[x] （5） 把选修数据结构课不及格的成绩全改为空值。<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">UPDATE</span> sc</span><br><span class="line"><span class="keyword">SET</span> grade <span class="operator">=</span> <span class="keyword">NULL</span></span><br><span class="line"><span class="keyword">WHERE</span> cno <span class="operator">=</span> (<span class="keyword">SELECT</span> cno <span class="keyword">FROM</span> course <span class="keyword">WHERE</span> cname <span class="operator">=</span> <span class="string">&#x27;数据结构&#x27;</span>) <span class="keyword">AND</span> grade <span class="operator">&lt;</span> <span class="number">60</span>;</span><br></pre></td></tr></table></figure></li>
<li>[x] （6） 把低于总平均成绩的女同学的成绩提高5%<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> TEMPORARY <span class="keyword">TABLE</span> temp_table <span class="keyword">AS</span></span><br><span class="line"><span class="keyword">SELECT</span> s.sno</span><br><span class="line"><span class="keyword">FROM</span> student s</span><br><span class="line"><span class="keyword">JOIN</span> sc <span class="keyword">ON</span> s.sno <span class="operator">=</span> sc.sno</span><br><span class="line"><span class="keyword">WHERE</span> s.ssex <span class="operator">=</span> <span class="string">&#x27;女&#x27;</span> <span class="keyword">AND</span> sc.grade <span class="operator">&lt;</span> (</span><br><span class="line">    <span class="keyword">SELECT</span> <span class="built_in">AVG</span>(grade)</span><br><span class="line">    <span class="keyword">FROM</span> sc</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">UPDATE</span> sc</span><br><span class="line"><span class="keyword">SET</span> grade <span class="operator">=</span> grade <span class="operator">*</span> <span class="number">1.05</span></span><br><span class="line"><span class="keyword">WHERE</span> sno <span class="keyword">IN</span> (</span><br><span class="line">    <span class="keyword">SELECT</span> sno <span class="keyword">FROM</span> temp_table</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">DROP</span> TEMPORARY <span class="keyword">TABLE</span> temp_table;</span><br><span class="line"></span><br><span class="line">MySQL不允许在<span class="keyword">UPDATE</span>语句的<span class="keyword">FROM</span>子句中直接引用目标表。我们需要使用一个临时表或者将子查询结果保存到一个变量中来解决这个问题。</span><br><span class="line"></span><br><span class="line">这段代码首先创建一个临时表，保存所有低于平均成绩的女同学的学号。然后，它更新sc表中的成绩，将所有在临时表中的学号对应的成绩提高<span class="number">5</span><span class="operator">%</span>。最后，它删除临时表。</span><br></pre></td></tr></table></figure></li>
<li>[x] （7） 在基本表SC中修改800004课程的成绩，若成绩小于等于75分时提高5%，若成绩大于75分时提高4%（用两个UPDATE语句实现）。<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">UPDATE</span> sc</span><br><span class="line"><span class="keyword">SET</span> grade <span class="operator">=</span> grade <span class="operator">*</span> <span class="number">1.05</span></span><br><span class="line"><span class="keyword">WHERE</span> cno <span class="operator">=</span> <span class="number">800004</span> <span class="keyword">AND</span> grade <span class="operator">&lt;=</span> <span class="number">75</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">UPDATE</span> sc</span><br><span class="line"><span class="keyword">SET</span> grade <span class="operator">=</span> grade <span class="operator">*</span> <span class="number">1.04</span></span><br><span class="line"><span class="keyword">WHERE</span> cno <span class="operator">=</span> <span class="number">800004</span> <span class="keyword">AND</span> grade <span class="operator">&gt;</span> <span class="number">75</span>;</span><br></pre></td></tr></table></figure>
<h1 id="存储过程"><a href="#存储过程" class="headerlink" title="存储过程"></a>存储过程</h1></li>
<li>[x] （1） 创建一个能向学生表student中插入一条记录的存储过程insert_student，该过程需要5个参数，分别用来传递学号、姓名、性别、出生日期、班级号。写出调用存储过程insert_student的SQL语句，向数据表student中插入一个新同学，并提供相应的实参值。<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">delimiter <span class="operator">/</span><span class="operator">/</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">procedure</span> insert_student(<span class="keyword">in</span> p_sno <span class="type">varchar</span>(<span class="number">20</span>), <span class="keyword">in</span> p_sname <span class="type">varchar</span>(<span class="number">20</span>), <span class="keyword">in</span> p_ssex <span class="type">varchar</span>(<span class="number">20</span>), <span class="keyword">in</span> p_sbirthday <span class="type">date</span>, <span class="keyword">in</span> p_classno <span class="type">varchar</span>(<span class="number">20</span>))</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">    <span class="keyword">insert</span> <span class="keyword">into</span> student(sno, sname, ssex, sbirthday, classno)</span><br><span class="line">    <span class="keyword">values</span> (p_sno, p_sname, p_ssex, p_sbirthday, p_classno);</span><br><span class="line"><span class="keyword">end</span> <span class="operator">/</span><span class="operator">/</span></span><br><span class="line">delimiter ;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">call</span> insert_student(<span class="string">&#x27;20301104&#x27;</span>, <span class="string">&#x27;廖学武&#x27;</span>, <span class="string">&#x27;男&#x27;</span>, <span class="string">&#x27;2001-06-29&#x27;</span>, <span class="string">&#x27;Rj0801&#x27;</span>);</span><br></pre></td></tr></table></figure>
<ul>
<li>[x] （2） 创建一个向课程表course中插入一门新课程的存储过程insert_course，该存储过程需要三个参数，分别用来传递课程号、课程名、学分，但允许参数“学分”的默认值为4，即当调用存储过程insert_course时，未给第三个参数“学分”提供实参值时，存储过程将按默认值4进行运算。<br>调用存储过程insert_course，向课程表course中插入一门新课程。分两种情况（给出第三个参数和未给出第三个参数）写出相应的SQL命令，并比较结果。<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">delimiter <span class="operator">/</span><span class="operator">/</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">procedure</span> insert_course(<span class="keyword">in</span> p_cno <span class="type">varchar</span>(<span class="number">20</span>), <span class="keyword">in</span> p_cname <span class="type">varchar</span>(<span class="number">20</span>), <span class="keyword">in</span> p_ccredit <span class="type">smallint</span> <span class="keyword">default</span> <span class="number">4</span>)</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">    if ccredit <span class="keyword">is</span> <span class="keyword">null</span> <span class="keyword">then</span></span><br><span class="line">        <span class="keyword">set</span> p_ccredit <span class="operator">=</span> <span class="number">4</span>;</span><br><span class="line">    <span class="keyword">end</span> if;</span><br><span class="line">    <span class="keyword">insert</span> <span class="keyword">into</span> course(cno, cname, ccredit) <span class="keyword">values</span>(p_cno, p_cname, p_ccredit);</span><br><span class="line"><span class="keyword">end</span> <span class="operator">/</span><span class="operator">/</span></span><br><span class="line">delimiter ;</span><br></pre></td></tr></table></figure>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">call</span> insert_course(<span class="string">&#x27;CS101&#x27;</span>, <span class="string">&#x27;计算机科学&#x27;</span>, <span class="keyword">NULL</span>);</span><br><span class="line"><span class="keyword">call</span> insert_course(<span class="string">&#x27;CS102&#x27;</span>, <span class="string">&#x27;数据结构&#x27;</span>, <span class="number">3</span>);</span><br></pre></td></tr></table></figure></li>
<li>[x] （3） 创建一个名称为query_student的存储过程，该存储过程的功能是从数据表student中根据学号查询某一同学的姓名、性别、出生日期、班级号。<br>调用存储过程query_student，查询学号为“08301050”的姓名、性别、出生日期、班级号，并写出完成此功能的SQL命令。<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">delimiter <span class="operator">/</span><span class="operator">/</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">procedure</span> query_student(<span class="keyword">in</span> p_sno <span class="type">varchar</span>(<span class="number">20</span>))</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">    <span class="keyword">select</span> sname, ssex, sbirthday, classno <span class="keyword">from</span> student <span class="keyword">where</span> sno <span class="operator">=</span> p_sno;</span><br><span class="line"><span class="keyword">end</span> <span class="operator">/</span><span class="operator">/</span></span><br><span class="line">delimiter ;</span><br></pre></td></tr></table></figure>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">call</span> query_student(<span class="string">&#x27;08300010&#x27;</span>);</span><br></pre></td></tr></table></figure></li>
<li>[x] （4） 建立存储过程，输出平均成绩大于80分的学生的姓名、性别、年龄和平均成绩。调用该存储过程，并输出相应的结果。<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">delimiter <span class="operator">/</span><span class="operator">/</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">procedure</span> get_low_course()</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">    <span class="keyword">select</span> student.sname <span class="keyword">as</span> <span class="string">&#x27;姓名&#x27;</span>, </span><br><span class="line">           student.ssex <span class="keyword">as</span> <span class="string">&#x27;性别&#x27;</span>, </span><br><span class="line">           <span class="keyword">year</span>(curdate()) <span class="operator">-</span> <span class="keyword">year</span>(student.sbirthday) <span class="keyword">as</span> <span class="string">&#x27;年龄&#x27;</span>, </span><br><span class="line">           <span class="built_in">avg</span>(sc.grade) <span class="keyword">as</span> <span class="string">&#x27;平均成绩&#x27;</span></span><br><span class="line">    <span class="keyword">from</span> student</span><br><span class="line">    <span class="keyword">join</span> sc <span class="keyword">on</span> student.sno <span class="operator">=</span> sc.sno</span><br><span class="line">    <span class="keyword">group</span> <span class="keyword">by</span> student.sno</span><br><span class="line">    <span class="keyword">having</span> <span class="built_in">avg</span>(sc.grade) <span class="operator">&lt;</span> <span class="number">80</span>;</span><br><span class="line"><span class="keyword">end</span> <span class="operator">/</span><span class="operator">/</span></span><br><span class="line">delimiter ;</span><br></pre></td></tr></table></figure>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">call</span> get_high_achievers();</span><br></pre></td></tr></table></figure></li>
<li>[x] （5） 写存储过程显示所有选择了与给定学生姓名选择的全部课程的学生的学号、姓名、选课数、平均成绩、总学分，调用该存储过程，并根据指定的学生姓名输出与其相应的结果。<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">delimiter <span class="operator">/</span><span class="operator">/</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">procedure</span> get_student_info(<span class="keyword">in</span> student_name <span class="type">varchar</span>(<span class="number">20</span>))</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">    <span class="keyword">select</span> </span><br><span class="line">        s.sno <span class="keyword">as</span> <span class="string">&#x27;学号&#x27;</span>,</span><br><span class="line">        s.sname <span class="keyword">as</span> <span class="string">&#x27;姓名&#x27;</span>,</span><br><span class="line">        <span class="built_in">count</span>(sc.cno) <span class="keyword">as</span> <span class="string">&#x27;选课数&#x27;</span>,</span><br><span class="line">        <span class="built_in">avg</span>(sc.grade) <span class="keyword">as</span> <span class="string">&#x27;平均成绩&#x27;</span>,</span><br><span class="line">        <span class="built_in">sum</span>(c.ccredit) <span class="keyword">as</span> <span class="string">&#x27;总学分&#x27;</span></span><br><span class="line">    <span class="keyword">from</span> student s</span><br><span class="line">    <span class="keyword">join</span> sc <span class="keyword">on</span> s.sno <span class="operator">=</span> sc.sno</span><br><span class="line">    <span class="keyword">join</span> course c <span class="keyword">on</span> sc.cno <span class="operator">=</span> c.cno</span><br><span class="line">    <span class="keyword">where</span> </span><br><span class="line">        s.sno <span class="keyword">in</span> (</span><br><span class="line">            <span class="keyword">select</span> sc.sno</span><br><span class="line">            <span class="keyword">from</span> student s</span><br><span class="line">            <span class="keyword">join</span> sc <span class="keyword">on</span> s.sno <span class="operator">=</span> sc.sno</span><br><span class="line">            <span class="keyword">where</span> s.sname <span class="operator">=</span> student_name</span><br><span class="line">        )</span><br><span class="line">    <span class="keyword">group</span> <span class="keyword">by</span> </span><br><span class="line">        s.sno;</span><br><span class="line"><span class="keyword">end</span> <span class="operator">/</span><span class="operator">/</span></span><br><span class="line">delimiter ;</span><br></pre></td></tr></table></figure>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">call</span> get_student_info(<span class="string">&#x27;胡贤斌&#x27;</span>);</span><br></pre></td></tr></table></figure></li>
<li>[x]（6） 写存储过程显示所有平均成绩小于给定班级号的平均成绩的学生的学号、</li>
</ul>
<p>名字、平均成绩</p>
<p>调用该存储过程，并根据指定的班级号输出与其相应的结果。<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">delimiter <span class="operator">/</span><span class="operator">/</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">procedure</span> get_students_below_class_average(<span class="keyword">in</span> class_no <span class="type">varchar</span>(<span class="number">20</span>))</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">    <span class="comment">-- 计算给定班级的平均成绩</span></span><br><span class="line">    <span class="keyword">declare</span> class_avg_grade <span class="type">decimal</span>(<span class="number">5</span>,<span class="number">2</span>);</span><br><span class="line">    <span class="keyword">select</span> <span class="built_in">avg</span>(sc.grade) <span class="keyword">into</span> class_avg_grade</span><br><span class="line">    <span class="keyword">from</span> student</span><br><span class="line">    <span class="keyword">join</span> sc <span class="keyword">on</span> student.sno <span class="operator">=</span> sc.sno</span><br><span class="line">    <span class="keyword">where</span> student.classno <span class="operator">=</span> class_no;</span><br><span class="line"></span><br><span class="line">    <span class="comment">-- 查询所有平均成绩小于给定班级平均成绩的学生</span></span><br><span class="line">    <span class="keyword">select</span> student.sno, student.sname, <span class="built_in">avg</span>(sc.grade) <span class="keyword">as</span> avg_grade</span><br><span class="line">    <span class="keyword">from</span> student</span><br><span class="line">    <span class="keyword">join</span> sc <span class="keyword">on</span> student.sno <span class="operator">=</span> sc.sno</span><br><span class="line">    <span class="keyword">group</span> <span class="keyword">by</span> student.sno, student.sname</span><br><span class="line">    <span class="keyword">having</span> avg_grade <span class="operator">&lt;</span> class_avg_grade;</span><br><span class="line"><span class="keyword">end</span> <span class="operator">/</span><span class="operator">/</span></span><br><span class="line">delimiter ;</span><br></pre></td></tr></table></figure><br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">call</span> get_students_below_class_average(<span class="string">&#x27;Rj0801&#x27;</span>);</span><br></pre></td></tr></table></figure></p>
<h1 id="触发器-1-5有问题"><a href="#触发器-1-5有问题" class="headerlink" title="触发器 1/5有问题"></a>触发器 1/5有问题</h1><ul>
<li>[x] （1） 创建一个当向学生表student中插入一新同学时能自动列出全部同学信息的触发器display_trigger。执行存储过程insert_student，向学生表中插入一个新同学，看触发器display_trigger是否被触发。<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">delimiter <span class="operator">/</span><span class="operator">/</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">trigger</span> display_trigger</span><br><span class="line">after <span class="keyword">insert</span> <span class="keyword">on</span> student</span><br><span class="line"><span class="keyword">for</span> <span class="keyword">each</span> <span class="type">row</span></span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">    <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> student;</span><br><span class="line"><span class="keyword">end</span> <span class="operator">/</span><span class="operator">/</span></span><br><span class="line">delimiter ;</span><br><span class="line"></span><br><span class="line"><span class="keyword">show</span> triggers; <span class="comment">-- 查看已创建的触发器</span></span><br></pre></td></tr></table></figure></li>
<li>[x] （2） 创建一个触发器，当向学生表student中插入一新同学时能自动更新（增加1）class班级表中该生所在班级的总人数。<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">delimiter <span class="operator">/</span><span class="operator">/</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">trigger</span> update_student_count_add</span><br><span class="line">after <span class="keyword">insert</span> <span class="keyword">on</span> student</span><br><span class="line"><span class="keyword">for</span> <span class="keyword">each</span> <span class="type">row</span></span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">    <span class="keyword">update</span> class <span class="keyword">set</span> studentnumber <span class="operator">=</span> studentnumber <span class="operator">+</span> <span class="number">1</span> <span class="keyword">where</span> classno <span class="operator">=</span> new.classno;</span><br><span class="line"><span class="keyword">end</span> <span class="operator">/</span><span class="operator">/</span></span><br><span class="line">delimiter ;</span><br><span class="line"></span><br><span class="line"><span class="keyword">drop</span> <span class="keyword">trigger</span> if <span class="keyword">exists</span> update_student_count;    <span class="comment">-- 删除触发器</span></span><br></pre></td></tr></table></figure></li>
<li>[x] （3） 创建一个触发器，当从学生表student中删除一个同学时能自动更新（减1）class班级表中该生所在班级的总人数。<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">delimiter <span class="operator">/</span><span class="operator">/</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">trigger</span> update_student_number_delete</span><br><span class="line">after <span class="keyword">delete</span> <span class="keyword">on</span> student</span><br><span class="line"><span class="keyword">for</span> <span class="keyword">each</span> <span class="type">row</span></span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">   <span class="keyword">update</span> class <span class="keyword">set</span> studentnumber <span class="operator">=</span> studentnumber <span class="operator">-</span> <span class="number">1</span> <span class="keyword">where</span> classno <span class="operator">=</span> old.classno;</span><br><span class="line"><span class="keyword">end</span> <span class="operator">/</span><span class="operator">/</span></span><br><span class="line">delimiter ;</span><br></pre></td></tr></table></figure></li>
<li>[x] （4） 创建一个触发器，当将学生表student中某一个同学从一个班级改为另一个班级时，能自动更新class班级表中该生所在原来班级的总人数（减1）和新班级的总人数（增加1）。<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">delimiter <span class="operator">/</span><span class="operator">/</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">trigger</span> update_student_count</span><br><span class="line">after <span class="keyword">update</span> <span class="keyword">on</span> student</span><br><span class="line"><span class="keyword">for</span> <span class="keyword">each</span> <span class="type">row</span></span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">    if old.classno <span class="operator">!=</span> new.classno <span class="keyword">then</span></span><br><span class="line">        <span class="keyword">update</span> class <span class="keyword">set</span> studentnumber <span class="operator">=</span> studentnumber <span class="operator">-</span> <span class="number">1</span> <span class="keyword">where</span> classno <span class="operator">=</span> old.classno;</span><br><span class="line">        <span class="keyword">update</span> class <span class="keyword">set</span> studentnumber <span class="operator">=</span> studentnumber <span class="operator">+</span> <span class="number">1</span> <span class="keyword">where</span> classno <span class="operator">=</span> new.classno;</span><br><span class="line">    <span class="keyword">end</span> if;</span><br><span class="line"><span class="keyword">end</span>;<span class="operator">/</span><span class="operator">/</span></span><br><span class="line">delimiter ;</span><br></pre></td></tr></table></figure></li>
<li>[x] （5） 建一个触发器，当往SC表中插入一个在STUDENT 表中不存在的学号SNO时，就往STUDENT表中插入该学号，其他属性全是NULL<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">delimiter <span class="operator">/</span><span class="operator">/</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">trigger</span> insert_student</span><br><span class="line">after <span class="keyword">insert</span> <span class="keyword">on</span> sc</span><br><span class="line"><span class="keyword">for</span> <span class="keyword">each</span> <span class="type">row</span></span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">    if <span class="keyword">not</span> <span class="keyword">exists</span> (<span class="keyword">select</span> <span class="number">1</span> <span class="keyword">from</span> student <span class="keyword">where</span> sno <span class="operator">=</span> new.sno) <span class="keyword">then</span></span><br><span class="line">        <span class="keyword">insert</span> <span class="keyword">into</span> student (sno) <span class="keyword">values</span> (new.sno);</span><br><span class="line">    <span class="keyword">end</span> if;</span><br><span class="line"><span class="keyword">end</span>;<span class="operator">/</span><span class="operator">/</span></span><br><span class="line">delimiter ;</span><br></pre></td></tr></table></figure></li>
<li>[x] （6） 写一个触发器阻止将学生成绩降低<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">delimiter <span class="operator">/</span><span class="operator">/</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">trigger</span> prevent_grade before <span class="keyword">update</span> <span class="keyword">on</span> sc</span><br><span class="line"><span class="keyword">for</span> <span class="keyword">each</span> <span class="type">row</span></span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">    if new.grade <span class="operator">&gt;</span> old.grade <span class="keyword">then</span></span><br><span class="line">        signal <span class="keyword">sqlstate</span> <span class="string">&#x27;45000&#x27;</span></span><br><span class="line">        <span class="keyword">set</span> message_text <span class="operator">=</span> <span class="string">&#x27;cannot asc student grade&#x27;</span>;</span><br><span class="line">    <span class="keyword">end</span> if;</span><br><span class="line"><span class="keyword">end</span>;</span><br><span class="line"><span class="operator">/</span><span class="operator">/</span></span><br><span class="line">delimiter ;</span><br></pre></td></tr></table></figure></li>
<li>[x] （7） 在sc表上创建触发器，只要有人选修的课程超过3门，就中断操作并提示警告<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">delimiter <span class="operator">/</span><span class="operator">/</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">trigger</span> check_course_limit</span><br><span class="line">before <span class="keyword">insert</span> <span class="keyword">on</span> sc</span><br><span class="line"><span class="keyword">for</span> <span class="keyword">each</span> <span class="type">row</span></span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">    <span class="keyword">declare</span> course_count <span class="type">int</span>;</span><br><span class="line">    <span class="keyword">select</span> <span class="built_in">count</span>(<span class="operator">*</span>) <span class="keyword">into</span> course_count <span class="keyword">from</span> sc <span class="keyword">where</span> sno <span class="operator">=</span> new.sno;</span><br><span class="line">    if course_count <span class="operator">&gt;=</span> <span class="number">3</span> <span class="keyword">then</span></span><br><span class="line">        signal <span class="keyword">sqlstate</span> <span class="string">&#x27;45000&#x27;</span> <span class="keyword">set</span> message_text <span class="operator">=</span> <span class="string">&#x27;一个学生不能选修超过3门课程&#x27;</span>;</span><br><span class="line">    <span class="keyword">end</span> if;</span><br><span class="line"><span class="keyword">end</span>;</span><br><span class="line"><span class="operator">/</span><span class="operator">/</span></span><br><span class="line">delimiter ;</span><br></pre></td></tr></table></figure></li>
<li>[x] （8） 创建一个触发器，当往SC表插入选修的课程时自动将该课程的学分累加到STUDENT表的该生的总学分（TOTALCREDIT）中，当从SC表中退课时自动从STUDENT表的该生的总学分中减去该课程的学分。<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">delimiter <span class="operator">/</span><span class="operator">/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 当插入新的选课记录时，增加学生的总学分</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">trigger</span> increase_totalcredit</span><br><span class="line">after <span class="keyword">insert</span> <span class="keyword">on</span> sc</span><br><span class="line"><span class="keyword">for</span> <span class="keyword">each</span> <span class="type">row</span></span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">    <span class="keyword">update</span> student</span><br><span class="line">    <span class="keyword">set</span> totalcredit <span class="operator">=</span> totalcredit <span class="operator">+</span> (<span class="keyword">select</span> ccredit <span class="keyword">from</span> course <span class="keyword">where</span> cno <span class="operator">=</span> new.cno)</span><br><span class="line">    <span class="keyword">where</span> sno <span class="operator">=</span> new.sno;</span><br><span class="line"><span class="keyword">end</span>;</span><br><span class="line"><span class="operator">/</span><span class="operator">/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 当删除选课记录时，减少学生的总学分</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">trigger</span> decrease_totalcredit</span><br><span class="line">after <span class="keyword">delete</span> <span class="keyword">on</span> sc</span><br><span class="line"><span class="keyword">for</span> <span class="keyword">each</span> <span class="type">row</span></span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">    <span class="keyword">update</span> student</span><br><span class="line">    <span class="keyword">set</span> totalcredit <span class="operator">=</span> totalcredit <span class="operator">-</span> (<span class="keyword">select</span> ccredit <span class="keyword">from</span> course <span class="keyword">where</span> cno <span class="operator">=</span> old.cno)</span><br><span class="line">    <span class="keyword">where</span> sno <span class="operator">=</span> old.sno;</span><br><span class="line"><span class="keyword">end</span>;</span><br><span class="line"><span class="operator">/</span><span class="operator">/</span></span><br><span class="line"></span><br><span class="line">delimiter ;</span><br></pre></td></tr></table></figure></li>
</ul>
</article><div class="post-copyright"><div class="copyright-cc-box"><i class="anzhiyufont anzhiyu-icon-copyright"></i></div><div class="post-copyright__author_box"><a class="post-copyright__author_img" href="/" title="头像"><img class="post-copyright__author_img_back" src="/assets/head.jpg" title="头像" alt="头像"><img class="post-copyright__author_img_front" src="/assets/head.jpg" title="头像" alt="头像"></a><div class="post-copyright__author_name">chfychin🥝</div><div class="post-copyright__author_desc"></div></div><div class="post-copyright__post__info"><a class="post-copyright__original" title="该文章为原创文章，注意版权协议" href="http://chfychin.cn/posts/4d712855.html">原创</a><a class="post-copyright-title"><span onclick="rm.copyPageUrl('http://chfychin.cn/posts/4d712855.html')">SQL</span></a></div><div class="post-tools" id="post-tools"><div class="post-tools-left"><div class="rewardLeftButton"><div class="post-reward" onclick="anzhiyu.addRewardMask()"><div class="reward-button button--animated" title="赞赏作者"><i class="anzhiyufont anzhiyu-icon-hand-heart-fill"></i>打赏作者</div><div class="reward-main"><div class="reward-all"><span class="reward-title">感谢你赐予我前进的力量</span><ul class="reward-group"><li class="reward-item"><a href="https://pcgdemo.chfychin.cn/img/pwechat.webp" target="_blank"><img class="post-qr-code-img" src="https://pcgdemo.chfychin.cn/img/pwechat.webp" alt="微信"/></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="https://pcgdemo.chfychin.cn/img/pzhifubao.webp" target="_blank"><img class="post-qr-code-img" src="https://pcgdemo.chfychin.cn/img/pzhifubao.webp" alt="支付宝"/></a><div class="post-qr-code-desc">支付宝</div></li></ul><a class="reward-main-btn" href="/about/#about-reward" target="_blank"><div class="reward-text">赞赏者名单</div><div class="reward-dec">因为你们的支持让我意识到写文章的价值🙏</div></a></div></div></div><div id="quit-box" onclick="anzhiyu.removeRewardMask()" style="display: none"></div><div class="reward-link mode"><a class="reward-link-button" href="/wechat/"><i class="anzhiyufont anzhiyu-icon-plant-fill"></i>运营模式与责任</a></div></div><div class="shareRight"><div class="share-link mobile"><div class="share-qrcode"><div class="share-button" title="使用手机访问这篇文章"><i class="anzhiyufont anzhiyu-icon-qrcode"></i></div><div class="share-main"><div class="share-main-all"><div id="qrcode" title="http://chfychin.cn/posts/4d712855.html"></div><div class="reward-dec">使用手机访问这篇文章</div></div></div></div></div><div class="share-link weibo"><a class="share-button" target="_blank" href="https://service.weibo.com/share/share.php?title=SQL&amp;url=http://chfychin.cn/posts/4d712855.html&amp;pic=https://pcgdemo.chfychin.cn/img/default_cover_60.webp" rel="external nofollow noreferrer noopener"><i class="anzhiyufont anzhiyu-icon-weibo"></i></a></div><script>function copyCurrentPageUrl() {
  var currentPageUrl = window.location.href;
  var input = document.createElement("input");
  input.setAttribute("value", currentPageUrl);
  document.body.appendChild(input);
  input.select();
  input.setSelectionRange(0, 99999);
  document.execCommand("copy");
  document.body.removeChild(input);
}</script><div class="share-link copyurl"><div class="share-button" id="post-share-url" title="复制链接" onclick="copyCurrentPageUrl()"><i class="anzhiyufont anzhiyu-icon-link"></i></div></div></div></div></div><div class="post-copyright__notice"><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://chfychin.cn" target="_blank">Chfychin🥝</a>！</span></div></div><div class="post-tools-right"><div class="tag_share"><div class="post-meta__box"><div class="post-meta__box__tag-list"><a class="post-meta__box__tags" href="/tags/SQL/"><span class="tags-punctuation"> <i class="anzhiyufont anzhiyu-icon-tag"></i></span>SQL<span class="tagsPageCount">1</span></a></div></div></div><div class="post_share"><div class="social-share" data-image="https://pcgdemo.chfychin.cn/img/default_cover_64.webp" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.cbd.int/butterfly-extsrc@1.1.3/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"/><script src="https://cdn.cbd.int/butterfly-extsrc@1.1.3/sharejs/dist/js/social-share.min.js" defer="defer"></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/posts/db289af5.html"><img class="prev-cover" src="https://pcgdemo.chfychin.cn/img/default_cover_59.webp" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">Office新版安装与激活</div></div></a></div><div class="next-post pull-right"><a href="/posts/4780.html"><img class="next-cover" src="https://pcgdemo.chfychin.cn/img/default_cover_65.webp" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">安知鱼主题修改背景</div></div></a></div></nav><hr/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="anzhiyufont anzhiyu-icon-comments"></i><span> 评论</span></div><div class="comment-randomInfo"><a onclick="anzhiyu.addRandomCommentInfo()" href="javascript:void(0)">匿名评论</a><a href="/privacy" style="margin-left: 4px">隐私政策</a></div><div class="comment-tips" id="comment-tips"><span>✅ 你无需删除空行，直接评论以获取最佳展示效果</span></div></div><div class="comment-wrap"><div><div id="twikoo-wrap"></div></div></div></div><div class="comment-barrage"></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="card-content"><div class="author-info__sayhi" id="author-info__sayhi" onclick="anzhiyu.changeSayHelloText()"></div><div class="author-info-avatar"><img class="avatar-img" src="/assets/head.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/><div class="author-status"><img class="g-status" src="https://bu.dusays.com/2023/08/24/64e6ce9c507bb.png" alt="status"/></div></div><div class="author-info__description">望眉目有山河,清澈明朗;愿胸中有丘壑,一往无前！！！ 🍭🍭🍭</div><div class="author-info__bottom-group"><a class="author-info__bottom-group-left" href="/"><h1 class="author-info__name">chfychin🥝</h1><div class="author-info__desc"></div></a><div class="card-info-social-icons is-center"><a class="social-icon faa-parent animated-hover" href="https://github.com/chfychin" target="_blank" title="Github"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-github"></use></svg></a><a class="social-icon faa-parent animated-hover" href="/assets/QRCode.jpg" target="_blank" title="微信"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-weixin"></use></svg></a><a class="social-icon faa-parent animated-hover" href="/assets/QQCode.jpg" target="_blank" title="QQ"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-QQ"></use></svg></a><a class="social-icon faa-parent animated-hover" href="mailto:2658326124@qq.com" target="_blank" title="QQ邮箱"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-youxiang"></use></svg></a><a class="social-icon faa-parent animated-hover" href="https://leetcode.cn/u/xing-ke-di/" target="_blank" title="力扣"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-LeetCode"></use></svg></a></div></div></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-bullhorn anzhiyu-shake"></i><span>公告</span></div><div class="announcement_content"><div id="welcome-info"></div></div></div><div class="card-widget card-countdown"><div class="item-headline"><i></i><span></span></div><div class="item-content"><div class="cd-count-left">
  <span class="cd-text">距离</span>
  <span class="cd-name" id="eventName"></span>
  <span class="cd-time" id="daysUntil"></span>
  <span class="cd-date" id="eventDate"></span>
</div>
<div id="countRight" class="cd-count-right"></div>
</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-bars"></i><span>文章目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E6%95%B0%E6%8D%AE%E8%A1%A8"><span class="toc-number">1.</span> <span class="toc-text">创建数据表</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AD%A6%E7%94%9F%E5%9F%BA%E6%9C%AC%E4%BF%A1%E6%81%AF%E8%A1%A8student"><span class="toc-number">1.1.</span> <span class="toc-text">学生基本信息表student</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%8F%AD%E7%BA%A7%E4%BF%A1%E6%81%AF%E8%A1%A8class"><span class="toc-number">1.2.</span> <span class="toc-text">班级信息表class</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%AF%BE%E7%A8%8B%E4%BF%A1%E6%81%AF%E8%A1%A8course"><span class="toc-number">1.3.</span> <span class="toc-text">课程信息表course</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%80%89%E4%BF%AE%E8%AF%BE%E7%A8%8B%E4%BF%A1%E6%81%AF%E8%A1%A8sc"><span class="toc-number">1.4.</span> <span class="toc-text">选修课程信息表sc</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%99%E5%B8%88%E4%BF%A1%E6%81%AF%E8%A1%A8teacher"><span class="toc-number">1.5.</span> <span class="toc-text">教师信息表teacher</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%99%E5%B8%88%E4%BB%BB%E8%AF%BE%E6%83%85%E5%86%B5%E8%A1%A8teaching"><span class="toc-number">1.6.</span> <span class="toc-text">教师任课情况表teaching</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%8F%92%E5%85%A5%E6%95%B0%E6%8D%AE"><span class="toc-number">2.</span> <span class="toc-text">插入数据</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%A1%A8student"><span class="toc-number">2.1.</span> <span class="toc-text">表student</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%A1%A8class"><span class="toc-number">2.2.</span> <span class="toc-text">表class</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%A1%A8course"><span class="toc-number">2.3.</span> <span class="toc-text">表course</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%A1%A8sc"><span class="toc-number">2.4.</span> <span class="toc-text">表sc</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%A1%A8teacher"><span class="toc-number">2.5.</span> <span class="toc-text">表teacher</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%A1%A8teaching"><span class="toc-number">2.6.</span> <span class="toc-text">表teaching</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AE%80%E5%8D%95%E7%9A%84%E6%95%B0%E6%8D%AE%E6%93%8D%E4%BD%9C"><span class="toc-number">3.</span> <span class="toc-text">简单的数据操作</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1"><span class="toc-number">3.1.</span> <span class="toc-text">1</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2"><span class="toc-number">3.2.</span> <span class="toc-text">2</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3"><span class="toc-number">3.3.</span> <span class="toc-text">3</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4"><span class="toc-number">3.4.</span> <span class="toc-text">4</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5"><span class="toc-number">3.5.</span> <span class="toc-text">5</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6"><span class="toc-number">3.6.</span> <span class="toc-text">6</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7"><span class="toc-number">3.7.</span> <span class="toc-text">7</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8"><span class="toc-number">3.8.</span> <span class="toc-text">8</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#9"><span class="toc-number">3.9.</span> <span class="toc-text">9</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#10"><span class="toc-number">3.10.</span> <span class="toc-text">10</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#11"><span class="toc-number">3.11.</span> <span class="toc-text">11</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#12"><span class="toc-number">3.12.</span> <span class="toc-text">12</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#13"><span class="toc-number">3.13.</span> <span class="toc-text">13</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#14"><span class="toc-number">3.14.</span> <span class="toc-text">14</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#15"><span class="toc-number">3.15.</span> <span class="toc-text">15</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#16"><span class="toc-number">3.16.</span> <span class="toc-text">16</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#17"><span class="toc-number">3.17.</span> <span class="toc-text">17</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#18"><span class="toc-number">3.18.</span> <span class="toc-text">18</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#19"><span class="toc-number">3.19.</span> <span class="toc-text">19</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#20"><span class="toc-number">3.20.</span> <span class="toc-text">20</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#21"><span class="toc-number">3.21.</span> <span class="toc-text">21</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#22"><span class="toc-number">3.22.</span> <span class="toc-text">22</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#23"><span class="toc-number">3.23.</span> <span class="toc-text">23</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#24"><span class="toc-number">3.24.</span> <span class="toc-text">24</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%A4%8D%E6%9D%82%E6%95%B0%E6%8D%AE%E6%9F%A5%E8%AF%A2-3%E9%97%AE%E9%A2%98"><span class="toc-number">4.</span> <span class="toc-text">复杂数据查询 3问题</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-1"><span class="toc-number">4.1.</span> <span class="toc-text">1</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-1"><span class="toc-number">4.2.</span> <span class="toc-text">2</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-1"><span class="toc-number">4.3.</span> <span class="toc-text">3</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-1"><span class="toc-number">4.4.</span> <span class="toc-text">5</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-1"><span class="toc-number">4.5.</span> <span class="toc-text">6</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-1"><span class="toc-number">4.6.</span> <span class="toc-text">7</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8-1"><span class="toc-number">4.7.</span> <span class="toc-text">8</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#9-1"><span class="toc-number">4.8.</span> <span class="toc-text">9</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#10-1"><span class="toc-number">5.</span> <span class="toc-text">10</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#11-1"><span class="toc-number">5.1.</span> <span class="toc-text">11</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#12-1"><span class="toc-number">5.2.</span> <span class="toc-text">12</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#13-1"><span class="toc-number">5.3.</span> <span class="toc-text">13</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#14-1"><span class="toc-number">5.4.</span> <span class="toc-text">14</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#15-1"><span class="toc-number">5.5.</span> <span class="toc-text">15</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#16-1"><span class="toc-number">5.6.</span> <span class="toc-text">16</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#17-1"><span class="toc-number">5.7.</span> <span class="toc-text">17</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#18-1"><span class="toc-number">5.8.</span> <span class="toc-text">18</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#19-1"><span class="toc-number">5.9.</span> <span class="toc-text">19</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#20-1"><span class="toc-number">5.10.</span> <span class="toc-text">20</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#21-1"><span class="toc-number">5.11.</span> <span class="toc-text">21</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#22-1"><span class="toc-number">5.12.</span> <span class="toc-text">22</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#23-1"><span class="toc-number">5.13.</span> <span class="toc-text">23</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#24-1"><span class="toc-number">5.14.</span> <span class="toc-text">24</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#25"><span class="toc-number">5.15.</span> <span class="toc-text">25</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#26"><span class="toc-number">5.16.</span> <span class="toc-text">26</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#27"><span class="toc-number">5.17.</span> <span class="toc-text">27</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#28"><span class="toc-number">5.18.</span> <span class="toc-text">28</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#29"><span class="toc-number">5.19.</span> <span class="toc-text">29</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#30"><span class="toc-number">5.20.</span> <span class="toc-text">30</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E6%93%8D%E7%BA%B5%E8%AF%AD%E8%A8%80DML"><span class="toc-number">6.</span> <span class="toc-text">数据操纵语言DML</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B"><span class="toc-number">7.</span> <span class="toc-text">存储过程</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%A7%A6%E5%8F%91%E5%99%A8-1-5%E6%9C%89%E9%97%AE%E9%A2%98"><span class="toc-number">8.</span> <span class="toc-text">触发器 1&#x2F;5有问题</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-history"></i><span>最近发布</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/posts/9e43cdf7.html" title="喜提河南icpc金牌"><img src="https://pcgdemo.chfychin.cn/img/default_cover_64.webp" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="喜提河南icpc金牌"/></a><div class="content"><a class="title" href="/posts/9e43cdf7.html" title="喜提河南icpc金牌">喜提河南icpc金牌</a><time datetime="2025-05-13T08:49:18.000Z" title="发表于 2025-05-13 16:49:18">2025-05-13</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/69b496a5.html" title="博客部署教程"><img src="https://pcgdemo.chfychin.cn/img/default_cover_68.webp" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="博客部署教程"/></a><div class="content"><a class="title" href="/posts/69b496a5.html" title="博客部署教程">博客部署教程</a><time datetime="2024-12-07T13:03:44.000Z" title="发表于 2024-12-07 21:03:44">2024-12-07</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/c6a2c78.html" title="PicGo+Gitee搭建个人图床"><img src="https://tuchuang.voooe.cn/images/2024/11/24/459c43780c1cde677ff2054c4ee4cc07.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="PicGo+Gitee搭建个人图床"/></a><div class="content"><a class="title" href="/posts/c6a2c78.html" title="PicGo+Gitee搭建个人图床">PicGo+Gitee搭建个人图床</a><time datetime="2024-11-12T06:50:19.000Z" title="发表于 2024-11-12 14:50:19">2024-11-12</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/24517.html" title="免费域名注册us.kg(转载)"><img src="https://pcgdemo.chfychin.cn/img/default_cover_67.webp" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="免费域名注册us.kg(转载)"/></a><div class="content"><a class="title" href="/posts/24517.html" title="免费域名注册us.kg(转载)">免费域名注册us.kg(转载)</a><time datetime="2024-10-28T14:32:07.000Z" title="发表于 2024-10-28 22:32:07">2024-10-28</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/29663.html" title="anzhiyu主题一图流"><img src="https://pcgdemo.chfychin.cn/img/default_cover_66.webp" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="anzhiyu主题一图流"/></a><div class="content"><a class="title" href="/posts/29663.html" title="anzhiyu主题一图流">anzhiyu主题一图流</a><time datetime="2024-10-28T13:03:44.000Z" title="发表于 2024-10-28 21:03:44">2024-10-28</time></div></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div id="footer_deal"><a class="deal_link" href="mailto:2658326124@qq.com" title="email"><i class="anzhiyufont anzhiyu-icon-envelope"></i></a><a class="deal_link" target="_blank" rel="noopener" href="https://weibo.com/u/6089548060" title="微博"><i class="anzhiyufont anzhiyu-icon-weibo"></i></a><a class="deal_link" target="_blank" rel="noopener" href="https://www.facebook.com/profile.php?id=100092208016287&amp;sk=about" title="facebook"><i class="anzhiyufont anzhiyu-icon-facebook1"></i></a><img class="footer_mini_logo" title="返回顶部" alt="返回顶部" onclick="anzhiyu.scrollToDest(0, 500)" src="/assets/head.jpg" size="50px"/><a class="deal_link" href="/search.xml" title="RSS"><i class="anzhiyufont anzhiyu-icon-rss"></i></a><a class="deal_link" target="_blank" rel="noopener" href="https://github.com/chfychin" title="Github"><i class="anzhiyufont anzhiyu-icon-github"></i></a><a class="deal_link" target="_blank" rel="noopener" href="https://space.bilibili.com/3461572947085662" title="Bilibili"><i class="anzhiyufont anzhiyu-icon-bilibili"></i></a></div><div id="workboard"><img class="workSituationImg boardsign" src="/assets/comment_bg.png" alt="距离月入25k也就还差一个大佬带我~" title="距离月入25k也就还差一个大佬带我~"/><div id="runtimeTextTip"></div></div><div id="anzhiyu-footer"><div class="footer-group"><div class="footer-title">服务</div><div class="footer-links"><a class="footer-item" title="51la统计" target="_blank" rel="noopener" href="https://v6.51.la/">51la统计</a><a class="footer-item" title="十年之约" target="_blank" rel="noopener" href="https://www.foreverblog.cn/">十年之约</a><a class="footer-item" title="开往" target="_blank" rel="noopener" href="https://github.com/travellings-link/travellings">开往</a></div></div><div class="footer-group"><div class="footer-title">主题</div><div class="footer-links"><a class="footer-item" title="文档" href="/docs/">文档</a><a class="footer-item" title="源码" target="_blank" rel="noopener" href="https://github.com/anzhiyu-c/hexo-theme-anzhiyu">源码</a><a class="footer-item" title="更新日志" href="/update/">更新日志</a></div></div><div class="footer-group"><div class="footer-title">导航</div><div class="footer-links"><a class="footer-item" title="即刻短文" href="/abouts/essay/">即刻短文</a><a class="footer-item" title="友链文章" href="/social/fcircle/">友链文章</a><a class="footer-item" title="留言板" href="/social/comments/">留言板</a></div></div><div class="footer-group"><div class="footer-title">协议</div><div class="footer-links"><a class="footer-item" title="隐私协议" href="/privacy/">隐私协议</a><a class="footer-item" title="Cookies" href="/cookies/">Cookies</a><a class="footer-item" title="版权协议" href="/copyright/">版权协议</a></div></div><div class="footer-group"><div class="footer-title-group"><div class="footer-title">友链</div><a class="random-friends-btn" id="footer-random-friends-btn" href="javascript:addFriendLinksInFooter();" title="换一批友情链接"><i class="anzhiyufont anzhiyu-icon-arrow-rotate-right"></i></a></div><div class="footer-links" id="friend-links-in-footer"></div></div></div><p id="ghbdages"><a class="github-badge" target="_blank" href="https://hexo.io/" style="margin-inline:5px" data-title="博客框架为Hexo_v6.3.0" title="博客框架为Hexo_v6.3.0"><img src="https://img.shields.io/badge/Frame-Hexo-blue?style=flat&amp;logo=hexo" alt="博客框架为Hexo_v6.3.0"/></a><a class="github-badge" target="_blank" href="https://blog.anheyu.com/" style="margin-inline:5px" data-title="本站使用AnZhiYu主题" title="本站使用AnZhiYu主题"><img src="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.9/img/Theme-AnZhiYu-2E67D3.svg" alt="本站使用AnZhiYu主题"/></a><a class="github-badge" target="_blank" href="https://www.dogecloud.com/" style="margin-inline:5px" data-title="本站使用多吉云为静态资源提供CDN加速" title="本站使用多吉云为静态资源提供CDN加速"><img src="https://npm.elemecdn.com/anzhiyu-blog@2.2.0/img/badge/CDN-多吉云-3693F3.svg" alt="本站使用多吉云为静态资源提供CDN加速"/></a><a class="github-badge" target="_blank" href="https://github.com/" style="margin-inline:5px" data-title="本网站源码由Github提供存储仓库" title="本网站源码由Github提供存储仓库"><img src="https://img.shields.io/badge/Source-Github-d021d6?style=flat&amp;logo=Github" alt="本网站源码由Github提供存储仓库"/></a><a class="github-badge" target="_blank" href="https://vercel.com/" style="margin-inline:5px" data-title="本站采用多线部署，主线路托管于Vercel" title="本站采用多线部署，主线路托管于Vercel"><img src="https://img.shields.io/badge/Hosted-vercel-brightgreen?style=flat&amp;logo=vercel" alt="本站采用多线部署，主线路托管于Vercel"/></a><a class="github-badge" target="_blank" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" style="margin-inline:5px" data-title="本站采用知识共享署名-非商业性使用-相同方式共享4.0国际许可协议进行许可" title="本站采用知识共享署名-非商业性使用-相同方式共享4.0国际许可协议进行许可"><img src="https://npm.elemecdn.com/anzhiyu-blog@2.2.0/img/badge/Copyright-BY-NC-SA.svg" alt="本站采用知识共享署名-非商业性使用-相同方式共享4.0国际许可协议进行许可"/></a></p></div><div id="footer-bar"><div class="footer-bar-links"><div class="footer-bar-left"><div id="footer-bar-tips"><div class="copyright">&copy;2024 - 2025 By <a class="footer-bar-link" href="/" title="chfychin🥝" target="_blank">chfychin🥝</a></div></div><div id="footer-type-tips"></div></div><div class="footer-bar-right"><a class="footer-bar-link" target="_blank" rel="noopener" href="https://github.com/anzhiyu-c/hexo-theme-anzhiyu" title="主题">主题</a></div></div></div></footer></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="sidebar-site-data site-data is-center"><a href="/archives/" title="archive"><div class="headline">文章</div><div class="length-num">23</div></a><a href="/tags/" title="tag"><div class="headline">标签</div><div class="length-num">19</div></a><a href="/categories/" title="category"><div class="headline">分类</div><div class="length-num">8</div></a></div><span class="sidebar-menu-item-title">功能</span><div class="sidebar-menu-item"><a class="darkmode_switchbutton menu-child" href="javascript:void(0);" title="显示模式"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span>显示模式</span></a></div><div class="back-menu-list-groups"><div class="back-menu-list-group"><div class="back-menu-list-title">网页</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://home.chfychin.cn/" title="Home"><img class="back-menu-item-icon" src="/img/favicon.ico" alt="Home"/><span class="back-menu-item-text">Home</span></a><a class="back-menu-item" target="_blank" rel="noopener" href="https://blog.chfychin.cn/" title="博客"><img class="back-menu-item-icon" src="/img/favicon.ico" alt="博客"/><span class="back-menu-item-text">博客</span></a></div></div></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 文章</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/archives/"><i class="anzhiyufont anzhiyu-icon-box-archive faa-tada" style="font-size: 0.9em;"></i><span> 隧道</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/categories/"><i class="anzhiyufont anzhiyu-icon-shapes faa-tada" style="font-size: 0.9em;"></i><span> 分类</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags faa-tada" style="font-size: 0.9em;"></i><span> 标签</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 友链</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/social/link/"><i class="anzhiyufont anzhiyu-icon-link faa-tada" style="font-size: 0.9em;"></i><span> 友人帐</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/social/fcircle/"><i class="anzhiyufont anzhiyu-icon-artstation faa-tada" style="font-size: 0.9em;"></i><span> 博友圈</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/abouts/essay/"><i class="anzhiyufont anzhiyu-icon-lightbulb faa-tada" style="font-size: 0.9em;"></i><span> 朋友圈</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/social/comments/"><i class="anzhiyufont anzhiyu-icon-envelope faa-tada" style="font-size: 0.9em;"></i><span> 留言板</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 我的</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/music/"><i class="anzhiyufont anzhiyu-icon-music faa-tada" style="font-size: 0.9em;"></i><span> 音乐馆</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/personal/bangumis/"><i class="anzhiyufont anzhiyu-icon-bilibili faa-tada" style="font-size: 0.9em;"></i><span> 追番页</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/personal/love/"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-love"></use></svg><span> 情侣空间</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/personal/album/"><i class="anzhiyufont anzhiyu-icon-images faa-tada" style="font-size: 0.9em;"></i><span> 相册集</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 项目</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" target="_blank" rel="noopener" href="https://minicover.chfychin.cn/"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-fengmian"></use></svg><span> 封面</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/personal/air-conditioner/"><i class="anzhiyufont anzhiyu-icon-fan faa-tada" style="font-size: 0.9em;"></i><span> 小空调</span></a></li><li><a class="site-page child faa-parent animated-hover" target="_blank" rel="noopener" href="https://muyu.chfychin.cn/"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-muyu"></use></svg><span> 电子木鱼</span></a></li><li><a class="site-page child faa-parent animated-hover" target="_blank" rel="noopener" href="https://firework.chfychin.cn/"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-yanhua"></use></svg><span> 赛博烟花</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 工具</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" target="_blank" rel="noopener" href="https://wanglin2.github.io/mind-map/#/"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-siweidaotu"></use></svg><span> 思维导图</span></a></li><li><a class="site-page child faa-parent animated-hover" target="_blank" rel="noopener" href="https://it-tools.tech/"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-It"></use></svg><span> IT工具</span></a></li><li><a class="site-page child faa-parent animated-hover" target="_blank" rel="noopener" href="https://www.json.cn/"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-json"></use></svg><span> json在线解析</span></a></li><li><a class="site-page child faa-parent animated-hover" target="_blank" rel="noopener" href="https://calcium.js.org/"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-jisuanqi"></use></svg><span> 在线计算器</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 网站</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/site/census/"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-tongji1"></use></svg><span> 网站统计</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/site/charts/"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-tongji"></use></svg><span> 统计</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 关于</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/abouts/about/"><i class="anzhiyufont anzhiyu-icon-paper-plane faa-tada" style="font-size: 0.9em;"></i><span> 关于本人</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/abouts/equipment/"><i class="anzhiyufont anzhiyu-icon-dice-d20 faa-tada" style="font-size: 0.9em;"></i><span> 我的装备</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/abouts/anniversary/"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-niao"></use></svg><span> 喵喵纪念日</span></a></li><li><a class="site-page child faa-parent animated-hover" href="javascript:toRandomPost()"><i class="anzhiyufont anzhiyu-icon-shoe-prints1 faa-tada" style="font-size: 0.9em;"></i><span> 随便逛逛</span></a></li></ul></div></div><span class="sidebar-menu-item-title">标签</span><div class="card-tags"><div class="item-headline"></div><div class="card-tag-cloud"><a href="/tags/C-%E6%A8%A1%E6%9D%BF/" style="font-size: 0.88rem;">C++模板<sup>1</sup></a><a href="/tags/Office/" style="font-size: 0.88rem;">Office<sup>1</sup></a><a href="/tags/SQL/" style="font-size: 0.88rem;">SQL<sup>1</sup></a><a href="/tags/STM32/" style="font-size: 0.88rem;">STM32<sup>1</sup></a><a href="/tags/git/" style="font-size: 0.88rem;">git<sup>1</sup></a><a href="/tags/%E4%B8%AA%E4%BA%BA%E5%9B%BE%E5%BA%8A%E6%90%AD%E5%BB%BA/" style="font-size: 0.88rem;">个人图床搭建<sup>1</sup></a><a href="/tags/%E4%BD%9C%E4%B8%BA%E6%97%A5%E8%AE%B0%E5%8A%A0%E5%AF%86/" style="font-size: 0.88rem;">作为日记加密<sup>1</sup></a><a href="/tags/%E5%8D%9A%E5%AE%A2%E9%83%A8%E7%BD%B2/" style="font-size: 0.88rem;">博客部署<sup>1</sup></a><a href="/tags/%E5%8D%9A%E5%AE%A2%E9%AD%94%E6%94%B9/" style="font-size: 0.88rem;">博客魔改<sup>2</sup></a><a href="/tags/%E5%9F%9F%E5%90%8D%E6%B3%A8%E5%86%8C/" style="font-size: 0.88rem;">域名注册<sup>1</sup></a><a href="/tags/%E6%95%B0%E5%AD%A6%E5%BB%BA%E6%A8%A1/" style="font-size: 0.88rem;">数学建模<sup>1</sup></a><a href="/tags/%E6%9C%89%E6%84%9F/" style="font-size: 0.88rem;">有感<sup>1</sup></a><a href="/tags/%E6%AF%9B%E6%A6%82/" style="font-size: 0.88rem;">毛概<sup>1</sup></a><a href="/tags/%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1%E7%AB%9E%E8%B5%9B/" style="font-size: 0.88rem;">程序设计竞赛<sup>2</sup></a><a href="/tags/%E7%AC%AC%E4%B8%80%E7%AF%87%E5%8D%9A%E5%AE%A2/" style="font-size: 0.88rem;">第一篇博客<sup>1</sup></a><a href="/tags/%E7%BA%BF%E6%80%A7%E4%BB%A3%E6%95%B0%E5%A4%8D%E4%B9%A0/" style="font-size: 0.88rem;">线性代数复习<sup>1</sup></a><a href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/" style="font-size: 0.88rem;">计算机操作系统<sup>1</sup></a><a href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/" style="font-size: 0.88rem;">计算机网络<sup>1</sup></a><a href="/tags/%E8%BD%AF%E4%BB%B6%E5%AE%89%E8%A3%85/" style="font-size: 0.88rem;">软件安装<sup>3</sup></a></div></div><hr/></div></div><div id="keyboard-tips"><div class="keyboardTitle">博客快捷键</div><div class="keybordList"><div class="keybordItem"><div class="keyGroup"><div class="key">shift K</div></div><div class="keyContent"><div class="content">关闭快捷键功能</div></div></div><div class="keybordItem"><div class="keyGroup"><div class="key">shift A</div></div><div class="keyContent"><div class="content">打开/关闭中控台</div></div></div><div class="keybordItem"><div class="keyGroup"><div class="key">shift M</div></div><div class="keyContent"><div class="content">播放/暂停音乐</div></div></div><div class="keybordItem"><div class="keyGroup"><div class="key">shift D</div></div><div class="keyContent"><div class="content">深色/浅色显示模式</div></div></div><div class="keybordItem"><div class="keyGroup"><div class="key">shift S</div></div><div class="keyContent"><div class="content">站内搜索</div></div></div><div class="keybordItem"><div class="keyGroup"><div class="key">shift R</div></div><div class="keyContent"><div class="content">随机访问</div></div></div><div class="keybordItem"><div class="keyGroup"><div class="key">shift H</div></div><div class="keyContent"><div class="content">返回首页</div></div></div><div class="keybordItem"><div class="keyGroup"><div class="key">shift F</div></div><div class="keyContent"><div class="content">友链鱼塘</div></div></div><div class="keybordItem"><div class="keyGroup"><div class="key">shift L</div></div><div class="keyContent"><div class="content">友链页面</div></div></div><div class="keybordItem"><div class="keyGroup"><div class="key">shift P</div></div><div class="keyContent"><div class="content">关于本站</div></div></div><div class="keybordItem"><div class="keyGroup"><div class="key">shift I</div></div><div class="keyContent"><div class="content">原版/本站右键菜单</div></div></div></div></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="anzhiyufont anzhiyu-icon-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="anzhiyufont anzhiyu-icon-gear"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="anzhiyufont anzhiyu-icon-list-ul"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="anzhiyufont anzhiyu-icon-comments"></i></a><button id="go-up" type="button" title="回到顶部"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></button></div></div><div id="nav-music"><a id="nav-music-hoverTips" onclick="anzhiyu.musicToggle()" accesskey="m">播放音乐</a><div id="console-music-bg"></div><meting-js id="8922088627" server="netease" type="playlist" mutex="true" preload="none" theme="var(--anzhiyu-main)" data-lrctype="0" order="random" volume="0.7"></meting-js></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="anzhiyufont anzhiyu-icon-xmark"></i></button></nav><div class="is-center" id="loading-database"><i class="anzhiyufont anzhiyu-icon-spinner anzhiyu-pulse-icon"></i><span>  数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div id="local-search-results"></div></div></div><div id="search-mask"></div></div><div id="rightMenu"><div class="rightMenu-group rightMenu-small"><div class="rightMenu-item" id="menu-backward"><i class="anzhiyufont anzhiyu-icon-arrow-left"></i></div><div class="rightMenu-item" id="menu-forward"><i class="anzhiyufont anzhiyu-icon-arrow-right"></i></div><div class="rightMenu-item" id="menu-refresh"><i class="anzhiyufont anzhiyu-icon-arrow-rotate-right" style="font-size: 1rem;"></i></div><div class="rightMenu-item" id="menu-top"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></div></div><div class="rightMenu-group rightMenu-line rightMenuPlugin"><div class="rightMenu-item" id="menu-copytext"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制选中文本</span></div><div class="rightMenu-item" id="menu-pastetext"><i class="anzhiyufont anzhiyu-icon-paste"></i><span>粘贴文本</span></div><a class="rightMenu-item" id="menu-commenttext"><i class="anzhiyufont anzhiyu-icon-comment-medical"></i><span>引用到评论</span></a><div class="rightMenu-item" id="menu-newwindow"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>新窗口打开</span></div><div class="rightMenu-item" id="menu-copylink"><i class="anzhiyufont anzhiyu-icon-link"></i><span>复制链接地址</span></div><div class="rightMenu-item" id="menu-copyimg"><i class="anzhiyufont anzhiyu-icon-images"></i><span>复制此图片</span></div><div class="rightMenu-item" id="menu-downloadimg"><i class="anzhiyufont anzhiyu-icon-download"></i><span>下载此图片</span></div><div class="rightMenu-item" id="menu-newwindowimg"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>新窗口打开图片</span></div><div class="rightMenu-item" id="menu-search"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>站内搜索</span></div><div class="rightMenu-item" id="menu-searchBaidu"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>百度搜索</span></div><div class="rightMenu-item" id="menu-music-toggle"><i class="anzhiyufont anzhiyu-icon-play"></i><span>播放音乐</span></div><div class="rightMenu-item" id="menu-music-back"><i class="anzhiyufont anzhiyu-icon-backward"></i><span>切换到上一首</span></div><div class="rightMenu-item" id="menu-music-forward"><i class="anzhiyufont anzhiyu-icon-forward"></i><span>切换到下一首</span></div><div class="rightMenu-item" id="menu-music-playlist" onclick="window.open(&quot;https://y.qq.com/n/ryqq/playlist/8802438608&quot;, &quot;_blank&quot;);" style="display: none;"><i class="anzhiyufont anzhiyu-icon-radio"></i><span>查看所有歌曲</span></div><div class="rightMenu-item" id="menu-music-copyMusicName"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制歌名</span></div></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item menu-link" id="menu-randomPost"><i class="anzhiyufont anzhiyu-icon-shuffle"></i><span>随便逛逛</span></a><a class="rightMenu-item menu-link" href="/categories/"><i class="anzhiyufont anzhiyu-icon-cube"></i><span>博客分类</span></a><a class="rightMenu-item menu-link" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags"></i><span>文章标签</span></a></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item" id="menu-copy" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制地址</span></a><a class="rightMenu-item" id="menu-commentBarrage" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-message"></i><span class="menu-commentBarrage-text">关闭热评</span></a><a class="rightMenu-item" id="menu-darkmode" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span class="menu-darkmode-text">深色模式</span></a><a class="rightMenu-item" id="menu-translate" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-language"></i><span>轉為繁體</span></a></div></div><div id="rightmenu-mask"></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.cbd.int/@fancyapps/ui@5.0.28/dist/fancybox/fancybox.umd.js"></script><script src="https://cdn.cbd.int/instant.page@5.2.0/instantpage.js" type="module"></script><script src="https://cdn.cbd.int/vanilla-lazyload@17.8.5/dist/lazyload.iife.min.js"></script><script src="https://cdn.cbd.int/node-snackbar@0.1.16/dist/snackbar.min.js"></script><canvas id="universe"></canvas><script async src="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.0/dark/dark.js"></script><script>// 消除控制台打印
var HoldLog = console.log;
console.log = function () {};
let now1 = new Date();
queueMicrotask(() => {
  const Log = function () {
    HoldLog.apply(console, arguments);
  }; //在恢复前输出日志
  const grt = new Date("9/9/2024 00:00:00"); //此处修改你的建站时间或者网站上线时间
  now1.setTime(now1.getTime() + 250);
  const days = (now1 - grt) / 1000 / 60 / 60 / 24;
  const dnum = Math.floor(days);
  const ascll = [
    `欢迎使用安知鱼!`,
    `生活明朗, 万物可爱`,
    `
        
       █████╗ ███╗   ██╗███████╗██╗  ██╗██╗██╗   ██╗██╗   ██╗
      ██╔══██╗████╗  ██║╚══███╔╝██║  ██║██║╚██╗ ██╔╝██║   ██║
      ███████║██╔██╗ ██║  ███╔╝ ███████║██║ ╚████╔╝ ██║   ██║
      ██╔══██║██║╚██╗██║ ███╔╝  ██╔══██║██║  ╚██╔╝  ██║   ██║
      ██║  ██║██║ ╚████║███████╗██║  ██║██║   ██║   ╚██████╔╝
      ╚═╝  ╚═╝╚═╝  ╚═══╝╚══════╝╚═╝  ╚═╝╚═╝   ╚═╝    ╚═════╝
        
        `,
    "已上线",
    dnum,
    "天",
    "©2024 By 安知鱼 V1.6.12",
  ];
  const ascll2 = [`NCC2-036`, `调用前置摄像头拍照成功，识别为【小笨蛋】.`, `Photo captured: `, `🤪`];

  setTimeout(
    Log.bind(
      console,
      `\n%c${ascll[0]} %c ${ascll[1]} %c ${ascll[2]} %c${ascll[3]}%c ${ascll[4]}%c ${ascll[5]}\n\n%c ${ascll[6]}\n`,
      "color:#425AEF",
      "",
      "color:#425AEF",
      "color:#425AEF",
      "",
      "color:#425AEF",
      ""
    )
  );
  setTimeout(
    Log.bind(
      console,
      `%c ${ascll2[0]} %c ${ascll2[1]} %c \n${ascll2[2]} %c\n${ascll2[3]}\n`,
      "color:white; background-color:#4fd953",
      "",
      "",
      'background:url("https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/tinggge.gif") no-repeat;font-size:450%'
    )
  );

  setTimeout(Log.bind(console, "%c WELCOME %c 你好，小笨蛋.", "color:white; background-color:#4f90d9", ""));

  setTimeout(
    console.warn.bind(
      console,
      "%c ⚡ Powered by 安知鱼 %c 你正在访问 chfychin🥝 的博客.",
      "color:white; background-color:#f0ad4e",
      ""
    )
  );

  setTimeout(Log.bind(console, "%c W23-12 %c 你已打开控制台.", "color:white; background-color:#4f90d9", ""));

  setTimeout(
    console.warn.bind(console, "%c S013-782 %c 你现在正处于监控中.", "color:white; background-color:#d9534f", "")
  );
});</script><script async src="/anzhiyu/random.js"></script><script async="async">(function () {
  var grt = new Date("9/9/2024 00:00:00"); //设置网站上线时间
  var now = new Date();
  var dnum;
  var hnum;
  var mnum;
  var snum;
  var nowHour;

  // 计算并更新天数、小时数、分钟数和秒数
  function updateTime() {
    now = new Date(); // 更新 now 的值
    nowHour = now.getHours(); // 更新 nowHour 的值
    var days = (now - grt) / 1000 / 60 / 60 / 24;
    dnum = Math.floor(days);
    var hours = (now - grt) / 1000 / 60 / 60 - 24 * dnum;
    hnum = Math.floor(hours);
    if (String(hnum).length == 1) {
      hnum = "0" + hnum;
    }
    var minutes = (now - grt) / 1000 / 60 - 24 * 60 * dnum - 60 * hnum;
    mnum = Math.floor(minutes);
    if (String(mnum).length == 1) {
      mnum = "0" + mnum;
    }
    var seconds = (now - grt) / 1000 - 24 * 60 * 60 * dnum - 60 * 60 * hnum - 60 * mnum;
    snum = Math.round(seconds);
    if (String(snum).length == 1) {
      snum = "0" + snum;
    }
  }

  // 更新网页中显示的网站运行时间
  function updateHtml() {
    const footer = document.getElementById("footer");
    if (!footer) return
    let currentTimeHtml = "";
    if (nowHour < 18 && nowHour >= 9) {
      // 如果是上班时间，默认就是"安知鱼-上班摸鱼中.svg"图片，不需要更改
      currentTimeHtml = `本站居然运行了 ${dnum} 天<span id='runtime'> ${hnum} 小时 ${mnum} 分 ${snum} 秒 </span><i class='anzhiyufont anzhiyu-icon-heartbeat' style='color:red'></i>`;
    } else {
      // 如果是下班时间，插入"安知鱼-下班啦.svg"图片
      let img = document.querySelector("#workboard .workSituationImg");
      if (img != null) {
        img.src = "/assets/comment_bg.png";
        img.title = "下班了就该开开心心的玩耍，嘿嘿~";
        img.alt = "下班了就该开开心心的玩耍，嘿嘿~";
      }

      currentTimeHtml = `本站居然运行了 ${dnum} 天<span id='runtime'> ${hnum} 小时 ${mnum} 分 ${snum} 秒 </span><i class='anzhiyufont anzhiyu-icon-heartbeat' style='color:red'></i>`;
    }

    if (document.getElementById("runtimeTextTip")) {
      document.getElementById("runtimeTextTip").innerHTML = currentTimeHtml;
    }
  }

  setInterval(() => {
    updateTime();
    updateHtml();
  }, 1000);
})();</script><script src="/js/search/local-search.js"></script><div class="js-pjax"><script>(() => {
  const init = () => {
    twikoo.init(Object.assign({
      el: '#twikoo-wrap',
      envId: 'https://twikoo.chfychin.cn/',
      region: '',
      onCommentLoaded: () => {
        anzhiyu.loadLightbox(document.querySelectorAll('#twikoo .tk-content img:not(.tk-owo-emotion)'))
      }
    }, null))
  }

  const loadTwikoo = () => {
    if (typeof twikoo === 'object') setTimeout(runFn,0)
    else getScript('https://cdn.cbd.int/twikoo@1.6.25/dist/twikoo.all.min.js').then(runFn)
  }

  const getCount = () => {
    const countELement = document.getElementById('twikoo-count')
    if(!countELement) return
    twikoo.getCommentsCount({
      envId: 'https://twikoo.chfychin.cn/',
      region: '',
      urls: [window.location.pathname],
      includeReply: false
    }).then(res => {
      countELement.textContent = res[0].count
    }).catch(err => {
      console.error(err)
    })
  }

  const runFn = () => {
    init();
    
  }

  if ('Twikoo' === 'Twikoo' || !false) {
    if (false) anzhiyu.loadComment(document.getElementById('twikoo-wrap'), loadTwikoo)
    else {
      loadTwikoo()
    }
  } else {
    window.loadOtherComment = loadTwikoo
  }
})()</script><input type="hidden" name="page-type" id="page-type" value="post"></div><script>window.addEventListener('load', () => {
  const changeContent = (content) => {
    if (content === '') return content

    content = content.replace(/<img.*?src="(.*?)"?[^\>]+>/ig, '[图片]') // replace image link
    content = content.replace(/<a[^>]+?href=["']?([^"']+)["']?[^>]*>([^<]+)<\/a>/gi, '[链接]') // replace url
    content = content.replace(/<pre><code>.*?<\/pre>/gi, '[代码]') // replace code
    content = content.replace(/<[^>]+>/g,"") // remove html tag

    if (content.length > 150) {
      content = content.substring(0,150) + '...'
    }
    return content
  }

  const getComment = () => {
    const runTwikoo = () => {
      twikoo.getRecentComments({
        envId: 'https://twikoo.chfychin.cn/',
        region: '',
        pageSize: 6,
        includeReply: true
      }).then(function (res) {
        const twikooArray = res.map(e => {
          return {
            'content': changeContent(e.comment),
            'avatar': e.avatar,
            'nick': e.nick,
            'url': e.url + '#' + e.id,
            'date': new Date(e.created).toISOString()
          }
        })

        saveToLocal.set('twikoo-newest-comments', JSON.stringify(twikooArray), 10/(60*24))
        generateHtml(twikooArray)
      }).catch(function (err) {
        const $dom = document.querySelector('#card-newest-comments .aside-list')
        $dom.textContent= "无法获取评论，请确认相关配置是否正确"
      })
    }

    if (typeof twikoo === 'object') {
      runTwikoo()
    } else {
      getScript('https://cdn.cbd.int/twikoo@1.6.25/dist/twikoo.all.min.js').then(runTwikoo)
    }
  }

  const generateHtml = array => {
    let result = ''

    if (array.length) {
      for (let i = 0; i < array.length; i++) {
        result += '<div class=\'aside-list-item\'>'

        if (true) {
          const name = 'data-lazy-src'
          result += `<a href='${array[i].url}' class='thumbnail'><img ${name}='${array[i].avatar}' alt='${array[i].nick}'><div class='name'><span>${array[i].nick} </span></div></a>`
        }
        
        result += `<div class='content'>
        <a class='comment' href='${array[i].url}' title='${array[i].content}'>${array[i].content}</a>
        <time datetime="${array[i].date}">${anzhiyu.diffDate(array[i].date, true)}</time></div>
        </div>`
      }
    } else {
      result += '没有评论'
    }

    let $dom = document.querySelector('#card-newest-comments .aside-list')
    $dom && ($dom.innerHTML= result)
    window.lazyLoadInstance && window.lazyLoadInstance.update()
    window.pjax && window.pjax.refresh($dom)
  }

  const newestCommentInit = () => {
    if (document.querySelector('#card-newest-comments .aside-list')) {
      const data = saveToLocal.get('twikoo-newest-comments')
      if (data) {
        generateHtml(JSON.parse(data))
      } else {
        getComment()
      }
    }
  }

  newestCommentInit()
  document.addEventListener('pjax:complete', newestCommentInit)
})</script><script>var visitorMail = "2658326124@qq.com";
</script><script async data-pjax src="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/waterfall/waterfall.js"></script><script src="https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/qrcodejs/1.0.0/qrcode.min.js"></script><script src="/js/anzhiyu/right_click_menu.js"></script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.1.9/icon/ali_iconfont_css.css"><script src="/js/chfychin.js"></script><script async src="//at.alicdn.com/t/c/font_4536330_14pxayacf51.js"></script><script src="https://pcgdemo.chfychin.cn/js/lunar.js"></script><script src="https://pcgdemo.chfychin.cn/js/echarts.min.js"></script><script async data-pjax src="/js/imgloaded.js?1"></script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/aplayer/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://cdn.cbd.int/anzhiyu-blog-static@1.0.1/js/APlayer.min.js"></script><script src="https://cdn.cbd.int/hexo-anzhiyu-music@1.0.1/assets/js/Meting2.min.js"></script><script src="https://cdn.cbd.int/pjax@0.2.8/pjax.min.js"></script><script>let pjaxSelectors = ["meta[property=\"og:image\"]","meta[property=\"og:title\"]","meta[property=\"og:url\"]","meta[property=\"og:type\"]","meta[property=\"og:site_name\"]","meta[property=\"og:description\"]","head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]
var pjax = new Pjax({
  elements: 'a:not([target="_blank"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {
  // removeEventListener scroll 
  anzhiyu.removeGlobalFnEvent('pjax')
  anzhiyu.removeGlobalFnEvent('themeChange')

  document.getElementById('rightside').classList.remove('rightside-show')
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')
})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()
})

document.addEventListener('pjax:error', e => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script charset="UTF-8" src="https://cdn.cbd.int/anzhiyu-theme-static@1.1.5/accesskey/accesskey.js"></script></div><div id="popup-window"><div class="popup-window-title">通知</div><div class="popup-window-divider"></div><div class="popup-window-content"><div class="popup-tip">你好呀</div><div class="popup-link"><i class="anzhiyufont anzhiyu-icon-arrow-circle-right"></i></div></div></div><!-- hexo injector body_end start -->
  <script data-pjax src="/js/hexo_githubcalendar.js"></script>
  <script data-pjax>
        function GithubCalendarConfig(){
            var git_githubapiurl ="https://py-git-cal-api.chfychin.cn/api?user=chfychin";
            var git_color =['#e4dfd7', '#f9f4dc', '#f7e8aa', '#f7e8aa', '#f8df72', '#fcd217', '#fcc515', '#f28e16', '#fb8b05', '#d85916', '#f43e06'];
            var git_user ="chfychin";
            var parent_div_git = document.getElementById('gitZone');
            var git_div_html = '<div class="recent-post-item" style="width:100%;height:auto;padding:10px;"><div id="github_loading" style="width:10%;height:100%;margin:0 auto;display: block"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"  viewBox="0 0 50 50" style="enable-background:new 0 0 50 50" xml:space="preserve"><path fill="#d0d0d0" d="M25.251,6.461c-10.318,0-18.683,8.365-18.683,18.683h4.068c0-8.071,6.543-14.615,14.615-14.615V6.461z" transform="rotate(275.098 25 25)"><animateTransform attributeType="xml" attributeName="transform" type="rotate" from="0 25 25" to="360 25 25" dur="0.6s" repeatCount="indefinite"></animateTransform></path></svg></div><div id="github_container"></div></div>';
            if(parent_div_git && location.pathname =='/site/census/'){
                console.log("已挂载hexo-github-calendar https://github.com/Barry-Flynn/hexo-github-calendar");
                // parent_div_git.innerHTML=git_div_html+parent_div_git.innerHTML // 无报错，但不影响使用(支持pjax跳转)
                parent_div_git.insertAdjacentHTML("afterbegin",git_div_html) // 有报错，但不影响使用(支持pjax跳转)
            };
            GithubCalendar(git_githubapiurl,git_color,git_user)
        }
        if(document.getElementById('gitZone')){
            GithubCalendarConfig()
        }
    </script>
    <style>#github_container{min-height:280px}@media screen and (max-width:650px) {#github_container{background-image:;min-height:0px}}</style>
    <style></style><script data-pjax>
  function butterfly_clock_anzhiyu_injector_config(){
    var parent_div_git = document.getElementsByClassName('sticky_layout')[0];
    var item_html = '<div class="card-widget card-clock"><div class="card-glass"><div class="card-background"><div class="card-content"><div id="hexo_electric_clock"><img class="entered loading" id="card-clock-loading" src="https://cdn.cbd.int/hexo-butterfly-clock-anzhiyu/lib/loading.gif" style="height: 120px; width: 100%;" data-ll-status="loading"/></div></div></div></div></div>';
    console.log('已挂载butterfly_clock_anzhiyu')
    if(parent_div_git) {
      parent_div_git.insertAdjacentHTML("afterbegin",item_html)
    }
  }
  var elist = 'null'.split(',');
  var cpage = location.pathname;
  var epage = '/';
  var qweather_key = '9fde2d862fc14daca20211b448f5e692';
  var gaud_map_key = 'a7b2c0c5e5e8425e8550bf8cac591eb0';
  var baidu_ak_key = 'undefined';
  var flag = 0;
  var clock_rectangle = '114.348666,36.066304';
  var clock_default_rectangle_enable = 'false';

  for (var i=0;i<elist.length;i++){
    if (cpage.includes(elist[i])){
      flag++;
    }
  }

  if ((epage ==='all')&&(flag == 0)){
    butterfly_clock_anzhiyu_injector_config();
  }
  else if (epage === cpage){
    butterfly_clock_anzhiyu_injector_config();
  }
  </script><script src="https://widget.qweather.net/simple/static/js/he-simple-common.js?v=2.0"></script><script data-pjax src="https://cdn.cbd.int/hexo-butterfly-clock-anzhiyu/lib/clock.min.js"></script><!-- hexo injector body_end end --><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"tagMode":false,"debug":false,"model":{"jsonPath":"https://cdn.jsdelivr.net/gh/evrstr/live2d-widget-models/live2d_evrstr/histoire/model.json"},"display":{"position":"left","width":220,"height":550},"mobile":{"show":true},"log":false,"pluginJsPath":"lib/","pluginModelPath":"assets/","pluginRootPath":"live2dw/"});</script></body></html>